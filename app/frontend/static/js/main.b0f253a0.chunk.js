(this.webpackJsonptracardi=this.webpackJsonptracardi||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},131:function(e,t,n){},157:function(e,t,n){},203:function(e,t,n){},266:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){},353:function(e,t,n){var a={"./start.md":[372,3],"./uql/create.md":[373,4],"./uql/delete.md":[374,5],"./uql/select.md":[375,6]};function c(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(a)},c.id=353,e.exports=c},354:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),i=n.n(c),r=n(435),s=n(17),o=n.n(s),l=(n(266),function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,444)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))}),d=n(30),j=function(e){return{name:e,initialState:{data:[],error:null,loading:!1},reducers:{loading:function(e){e.data=[],e.loading=!0,e.error=null},ready:function(e,t){e.data=t.payload.data,e.loading=!1,e.error=null},failed:function(e,t){e.data=[],e.loading=!1,e.error=t.payload.error}}}},u=Object(d.b)(j("select")),b=u.actions,h=(b.loading,b.ready,b.failed,u.reducer),O=Object(d.b)({name:"right-paper",initialState:{content:null,open:!1,width:1e3,anchor:"right"},reducers:{openRightPaper:function(e,t){e.content=t.payload.content,e.width=t.payload.width,e.anchor="undefined"!==typeof t.payload.anchor?t.payload.anchor:"right",e.open=!0},closeRightPaper:function(e){e.open=!1}}}),p=O.actions,x=p.openRightPaper,m=p.closeRightPaper,f=O.reducer,g=Object(d.b)({name:"notification",initialState:{value:0},reducers:{increaseNotificationNumber:function(e){e.value+=1},decreaseNotificationNumber:function(e){e.value-=1},resetNotificationNumber:function(e){e.value=0}}}),v=g.actions,y=(v.increaseNotificationNumber,v.decreaseNotificationNumber,v.resetNotificationNumber,g.reducer),C=Object(d.b)({name:"warning",initialState:{show:!1,message:"n/a"},reducers:{showWarningIcon:function(e,t){e.show=!0,e.message=t.payload.message},hideWarningIcon:function(e){e.show=!1,e.message=""}}}),S=C.actions,N=(S.showWarningIcon,S.hideWarningIcon,C.reducer),w=Object(d.b)({name:"alert",initialState:{message:"n/a",type:"info",show:!1,hideAfter:1e3},reducers:{showAlert:function(e,t){e.message=t.payload.message,e.type=t.payload.type,e.show=!0,e.hideAfter="undefined"!=typeof t.payload.hideAfter?t.payload.hideAfter:500},hideAlert:function(e){e.show=!1}}}),R=w.actions,k=R.showAlert,T=R.hideAlert,E=w.reducer,L=Object(d.b)({name:"progress",initialState:{progress:0},reducers:{increaseProgress:function(e,t){e.progress+=t.payload.value},decreaseProgress:function(e,t){e.progress-=t.payload.value},resetProgress:function(e){e.progress=0}}}),A=L.actions,_=(A.increaseProgress,A.decreaseProgress,A.resetProgress,L.reducer),P=Object(d.b)(j("event-data-grid")),I=P.actions,D=(I.loading,I.ready,I.failed,P.reducer),B=Object(d.b)({name:"uql-query",initialState:{uql:""},reducers:{runQuery:function(e,t){var n="none",a=t.payload.query.toLowerCase();a.startsWith("select event")?n="event":a.startsWith("select rule")?n="rule":a.startsWith("select segment")&&(n="segment"),e.uql=t.payload.query,e.uqlType=n,localStorage.setItem("uqlType",n)}}}),F=B.actions.runQuery,U=B.reducer,W=Object(d.a)({reducer:{datasetSelectReducer:h,rightPaperReducer:f,notificationReducer:y,progressReducer:_,warningIconReducer:N,alertReducer:E,eventDataGridReducer:D,uqlReducer:U}}),q=n(16),H=n(13),M=n(40),V=n(26),G=n(35),Q=n(67);function z(){return JSON.parse(localStorage.getItem("auth-roles"))}function K(){return localStorage.getItem("auth-token")}var J=n(46),Y=n(406);function X(){return Object(a.jsxs)(J.a,{variant:"body2",color:"textPrimary",align:"center",children:["You do not have rights to this page.",Object(a.jsx)(Y.a,{color:"inherit",href:"/app/login",children:"Log-in"}),"."]})}function Z(e){var t=e.children,n=e.location,c=e.roles,i=Object(Q.a)(e,["children","location","roles"]);function r(e,t){var n=new Set(t);return Object(G.a)(new Set(e)).filter((function(e){return n.has(e)}))}return Object(a.jsx)(V.b,Object(H.a)(Object(H.a)({},i),{},{children:null!==K()?(console.log(z()),console.log(c),console.log(r(z(),c)),r(z(),c).length>0?t:Object(a.jsx)(X,{})):Object(a.jsx)(V.a,{to:{pathname:"/app/login",state:{from:n}}})}))}var $=n(443),ee=n(436),te=(n(275),n(6)),ne=n(34),ae=n(49),ce=n(15),ie=n(414),re=n(407),se=n(77),oe=n(173),le=n(170),de=n(213),je=n.n(de),ue=n(212),be=n.n(ue),he=n(214),Oe=n.n(he),pe=n(413),xe=n(415),me=(n(276),n(167)),fe=n(412),ge=n(408),ve=n(359),ye=n(360),Ce=n(361),Se=n(409),Ne=n(411),we=n(410),Re=n(441),ke=Object(ae.a)((function(e){return{title:Object(ne.a)({color:"black",display:"none"},e.breakpoints.up("sm"),{display:"block"}),drawerPaper:{width:"280px",color:e.palette.background.default}}}));function Te(e){var t=e.drawerState,n=e.toggleDrawer,c=ke();return Object(a.jsx)(Re.a,{variant:"temporary",anchor:"left",open:t,onClose:n(!1),classes:{paper:c.drawerPaper},children:Object(a.jsxs)("div",{className:"drawer",role:"presentation",onClick:n(!1),onKeyDown:n(!1),children:[Object(a.jsx)(re.a,{children:Object(a.jsxs)(J.a,{className:c.title,variant:"h6",noWrap:!0,children:["Tracardi ",Object(a.jsx)("span",{className:"thin",children:"for Unomi"})," ",Object(a.jsx)("span",{className:"small",children:"ver. 0.1.0"})]})}),Object(a.jsx)(ge.a,{}),Object(a.jsxs)(ve.a,{children:[Object(a.jsx)(M.b,{to:"/app/sources",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Se.a,{style:{color:"black",fontWeight:300}})}),Object(a.jsx)(we.a,{children:"Sources"})]},"1")}),Object(a.jsx)(M.b,{to:"/app/events",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Se.a,{style:{color:"black",fontWeight:300}})}),Object(a.jsx)(we.a,{children:"Events"})]},"1")}),Object(a.jsx)(M.b,{to:"/app/rules",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Se.a,{style:{color:"black",fontWeight:300}})}),Object(a.jsx)(we.a,{children:"Rules"})]},"1")}),Object(a.jsx)(M.b,{to:"/app/segments",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Se.a,{style:{color:"black",fontWeight:300}})}),Object(a.jsx)(we.a,{children:"Segments"})]},"1")}),Object(a.jsx)(M.b,{to:"/app/profiles",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Se.a,{style:{color:"black",fontWeight:300}})}),Object(a.jsx)(we.a,{children:"Profiles"})]},"1")}),Object(a.jsx)(M.b,{to:"/app/console",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Se.a,{style:{color:"black",fontWeight:300}})}),Object(a.jsxs)(we.a,{children:["QUL ",Object(a.jsx)("span",{className:"thin",children:"console"})]})]},"1")}),Object(a.jsx)(M.b,{to:"/app/manual",className:"listItem",children:Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Ne.a,{style:{color:"black"}})}),Object(a.jsxs)(we.a,{children:["UQL ",Object(a.jsx)("span",{className:"thin",children:"documentation"})]})]},"2")})]})]})})}var Ee=Object(q.b)((function(e){return{data:e.rightPaperReducer}}),{closeRightPaper:m})((function(e){var t=e.open,n=e.closeRightPaper,c=e.data;return Object(a.jsx)(Re.a,{anchor:c.anchor,open:t,onClose:n,children:"right"==c.anchor||"left"==c.anchor?Object(a.jsx)("div",{style:{width:c.width},children:c.content}):Object(a.jsx)("div",{style:{height:c.width},children:c.content})})})),Le=Object(ae.a)((function(e){var t;return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={color:"primary",display:"none"},Object(ne.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(ne.a)(t,"& span",{fontWeight:300}),t),thin:{fontWeight:"300"},search:Object(ne.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ce.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ce.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto","&:focus":{width:"100%"}}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ne.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch","&:focus":{width:"70ch"}}),sectionDesktop:Object(ne.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(ne.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),drawerPaper:{width:"280px",color:e.palette.background.default},drawerItem:{root:{minWidth:"10px"}},menuItem:{color:"black"}}})),Ae=Object(q.b)((function(e){return{notificationCount:e.notificationReducer.value,warningIcon:e.warningIconReducer,rightPaper:e.rightPaperReducer}}))((function(e){var t=e.runQuery,n=e.notificationCount,c=e.warningIcon,r=e.title,s=e.showSearch,o=e.rightPaper,l=Le(),d=i.a.useState(!1),j=Object(te.a)(d,2),u=j[0],b=j[1],h=Object(V.g)(),O=function(){h.push("/app/logout")},p=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&b(e)}},x=function(e){"Enter"===e.key&&(t(e.target.value),e.preventDefault())};return Object(a.jsxs)("div",{className:l.grow,children:[Object(a.jsx)(Te,{toggleDrawer:p,drawerState:u}),Object(a.jsx)(Ee,{open:o.open}),Object(a.jsx)(ie.a,{position:"fixed",style:{background:"linear-gradient(45deg, #1565c0 30%, #5e35b1 90%)"},children:Object(a.jsxs)(re.a,{children:[Object(a.jsx)(se.a,{edge:"start",className:l.menuButton,color:"inherit","aria-label":"open drawer",onClick:p(!0),children:Object(a.jsx)(je.a,{})}),Object(a.jsxs)(J.a,{className:l.title,variant:"h6",noWrap:!0,children:["TRACARDI ",Object(a.jsx)("span",{children:r})]}),function(){if(s)return Object(a.jsxs)("div",{className:l.search,children:[Object(a.jsx)("div",{className:l.searchIcon,children:Object(a.jsx)(be.a,{})}),Object(a.jsx)(oe.a,{placeholder:"Search\u2026",classes:{root:l.inputRoot,input:l.inputInput},inputProps:{"aria-label":"search"},onKeyPress:x})]})}(),Object(a.jsx)("div",{className:l.grow}),Object(a.jsxs)("div",{className:l.sectionDesktop,children:[c.show&&Object(a.jsx)(me.a,{title:c.message,TransitionComponent:fe.a,children:Object(a.jsx)(se.a,{"aria-label":"show alert",color:"inherit",children:Object(a.jsx)(pe.a,{})})}),Object(a.jsx)(me.a,{title:"Notifications",TransitionComponent:fe.a,children:Object(a.jsx)(se.a,{"aria-label":"show new notifications",color:"inherit",children:Object(a.jsx)(le.a,{badgeContent:n,color:"secondary",children:Object(a.jsx)(Oe.a,{})})})}),Object(a.jsx)(me.a,{title:"Logout",TransitionComponent:fe.a,children:Object(a.jsx)(se.a,{"aria-label":"Logout",color:"inherit",onClick:O,children:Object(a.jsx)(xe.a,{})})})]}),Object(a.jsx)("div",{className:l.sectionMobile,children:Object(a.jsx)(me.a,{title:"Logout",TransitionComponent:fe.a,children:Object(a.jsx)(se.a,{"aria-label":"Logout",color:"inherit",onClick:O,children:Object(a.jsx)(xe.a,{})})})})]})})]})})),_e=n(425),Pe=n(217),Ie=n.n(Pe),De=n(437),Be=n(422),Fe=n(416),Ue=n(19),We=n(216),qe=n.n(We),He=n(420),Me=(n(278),n(419)),Ve=n(230),Ge=n(439),Qe=n(418),ze=n(438),Ke=n(440),Je=n(78),Ye=n(145),Xe=n(70),Ze=n(93),$e=n(364),et=n(215),tt=n.n(et),nt=function(){var e=K();return"Bearer "+(null==e?"None":e)},at=function(e){return e=Object(H.a)(Object(H.a)({},e),{},{Authorization:nt()}),tt.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,headers:e})},ct=function(e,t,n,a,c){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];i&&(a(!1),c(!1),n(!0));try{at({"Content-type":"text/plain"}).post(t,e).then((function(e){n(!1),c({data:e.data})})).catch((function(e){n(!1),"undefined"!=typeof e.response?a(e.response.data.detail):a(e.message)}))}catch(r){a(r.message)}},it=function(e,t,n,a){n(!1),a(!1),t(!0);try{at({"Content-type":"application/json"}).get(e).then((function(e){t(!1),a({data:e.data})})).catch((function(e){t(!1),"undefined"!=typeof e.response?n(e.response.data.detail):n(e.message)}))}catch(c){n(c.message)}},rt=function(e,t,n,a){n(!1),a(!1),t(!0);try{at({"Content-type":"application/json"}).delete(e).then((function(e){t(!1),a({data:e.data})})).catch((function(e){t(!1),"undefined"!=typeof e.response?n(e.response.data.detail):n(e.message)}))}catch(c){n(c.message)}},st=n(417),ot=(n(203),n(157),Object(ae.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingBottom:e.spacing(3)},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2),marginRight:e.spacing(2),minWidth:"100px"}}})));function lt(e){var t=e.name,n=e.value;return Object(a.jsxs)("div",{style:{paddingLeft:"5px"},children:[Object(a.jsxs)("div",{style:{fontWeight:400,minWidth:100,display:"inline-block",padding:5},children:[t,":"]}),Object(a.jsx)("span",{style:{padding:5,borderBottom:"solid 1px #ccc",display:"inline-block",minWidth:450},children:n})]})}function dt(e){var t=e.conditionValue,n=e.handleConditionChange;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:"Condition is SQL like condition that describes when the rule should be triggered. Please refer to documentation to see the syntax of conditions."}),Object(a.jsx)(Ve.a,{id:"rule-condition",label:"Rule condition",multiline:!0,value:t,onChange:n}),Object(a.jsx)($e.a,{children:'Example: (scope="my-site1" OR scope="my-site2") AND event:type="view"'})]})}function jt(e){var t=e.descValue,n=e.handleDescChange;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:"Rule description can be any string that describes rule's purpose. It corresponds with the action that will fire when condition is met."}),Object(a.jsx)(Ve.a,{id:"rule-desc",label:"Rule description",value:t,onChange:n}),Object(a.jsx)($e.a,{children:"Example: Add points to loyalty card with every purchase"})]})}function ut(e){var t=e.nameValue,n=e.handleNameChange,c=e.scope,r=e.handleScopeChange,s=ot();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:"Set scope and rule name. Scope is an id of your site and rule name can be any string that identifies rule. Rule id is made out of rule name by replacing spaces with hyphens and lowering the string."}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("div",{style:{verticalAlign:"bottom"},children:[Object(a.jsxs)(Ye.a,{value:c,onChange:r,inputProps:{name:"scope",id:"scope-select"},className:s.selectEmpty,children:[Object(a.jsx)(Xe.a,{value:"site-1",children:"site-1"}),Object(a.jsx)(Xe.a,{value:"site-2",children:"site-2"}),Object(a.jsx)(Xe.a,{value:"site-3",children:"site-3"})]}),Object(a.jsx)($e.a,{children:"Scope"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Ve.a,{required:!0,id:"rule-name",label:"Rule name",value:t,onChange:n}),Object(a.jsx)($e.a,{children:"Example: points with every purchase"})]})]})]})}function bt(e){var t=e.actionValue,n=e.handleActionChange;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:"Rule actions is a set of predefined actions that will fire when the condition is fulfilled."}),Object(a.jsx)(Ve.a,{id:"rule-action",label:"Rule action",multiline:!0,value:t,onChange:n}),Object(a.jsx)($e.a,{children:"Example: IncreaseLoyalityCardPoints(100), CopyEventsToProfileProperties()"})]})}function ht(e){var t=e.scope,n=e.name,c=e.desc,r=e.condition,s=e.action,o=e.handleReset,l=ot(),d=i.a.useState(!1),j=Object(te.a)(d,2),u=j[0],b=(j[1],i.a.useState(!1)),h=Object(te.a)(b,2),O=h[0],p=h[1],x=function(e){p(e)},m=i.a.useState(""),f=Object(te.a)(m,2),g=f[0],v=f[1],y=i.a.useState(""),C=Object(te.a)(y,2),S=C[0],N=C[1],w=function(e){v(e)},R=function(e){N(e)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{children:"All steps completed - here is your rule summary"}),Object(a.jsxs)("div",{style:{marginTop:20},children:[Object(a.jsx)(lt,{name:"Scope",value:t}),Object(a.jsx)(lt,{name:"Name",value:n}),Object(a.jsx)(lt,{name:"Description",value:c}),Object(a.jsx)(lt,{name:"Condition",value:r}),Object(a.jsx)(lt,{name:"Actions",value:s})]}),function(e,t){if(""!==e)return Object(a.jsxs)(ee.a,{severity:t,style:{marginTop:20},children:[Object(a.jsx)(st.a,{children:t.toUpperCase()}),Object(a.jsx)("pre",{style:{width:"515px",overflow:"auto"},children:e})]})}(g,S),Object(a.jsxs)("div",{style:{marginTop:10},children:[Object(a.jsx)(Je.a,{onClick:function(){!function(e,t,n,a){try{t(),at({"Content-type":"application/json"}).post("/rule",e).then((function(e){n({data:e.data})})).catch((function(e){a(e)}))}catch(c){a(c)}}({scope:t,name:n,desc:c,condition:r,action:s},(function(){x(!0),R("loading"),w("Loading")}),(function(e){console.log(e),R("success"),w("Rule created."),x(!1)}),(function(e){x(!1),R("error"),"undefined"!=typeof e.response?w(e.response.data.detail):w(e.toString())}))},className:l.button,variant:"contained",color:"primary",disabled:O,children:"Submit"}),Object(a.jsx)(Je.a,{onClick:function(){o(),x(!1)},className:l.button,disabled:u,children:"Back"})]})]})}function Ot(){var e=ot(),t=i.a.useState(0),n=Object(te.a)(t,2),c=n[0],r=n[1],s=i.a.useState(""),o=Object(te.a)(s,2),l=o[0],d=o[1],j=function(e){d(e.target.value)},u=i.a.useState(""),b=Object(te.a)(u,2),h=b[0],O=b[1],p=function(e){O(e.target.value)},x=i.a.useState(""),m=Object(te.a)(x,2),f=m[0],g=m[1],v=function(e){g(e.target.value)},y=i.a.useState(""),C=Object(te.a)(y,2),S=C[0],N=C[1],w=function(e){N(e.target.value)},R=i.a.useState(""),k=Object(te.a)(R,2),T=k[0],E=k[1],L=function(e){E(e.target.value)},A=["Select scope and rule name","Type rule description","Create condition","Create action","Submit rule"],_=function(){r((function(e){return e+1}))},P=function(){r((function(e){return e-1}))},I=function(){P()},D=function(e){switch(e){case 0:return Object(a.jsx)(ut,{nameValue:S,handleNameChange:w,scope:l,handleScopeChange:j});case 1:return Object(a.jsx)(jt,{descValue:T,handleDescChange:L});case 2:return Object(a.jsx)(dt,{conditionValue:h,handleConditionChange:p});case 3:return Object(a.jsx)(bt,{actionValue:f,handleActionChange:v});case 4:return Object(a.jsx)(ht,{scope:l,name:S,desc:T,condition:h,action:f,handleReset:I});default:return"Unknown step"}},B=function(){if(c<A.length-1)return Object(a.jsxs)(i.a.Fragment,{children:[0!==c&&Object(a.jsx)(Je.a,{disabled:0===c,onClick:P,className:e.button,children:"Back"}),Object(a.jsx)(Je.a,{variant:"contained",color:"primary",onClick:_,className:e.button,children:"Next"})]})};return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(Ge.a,{activeStep:c,orientation:"vertical",children:A.map((function(t,n){return Object(a.jsxs)(Qe.a,{onClickCapture:function(){r(n)},children:[Object(a.jsx)(ze.a,{children:t}),Object(a.jsxs)(Ke.a,{children:[Object(a.jsx)(Ze.a,{className:e.formControl,children:D(n)}),Object(a.jsx)("div",{className:e.actionsContainer,children:Object(a.jsx)("div",{children:B()})})]})]},t)}))})})}function pt(e){var t=e.name,n=e.value;return Object(a.jsxs)("div",{style:{paddingLeft:"5px"},children:[Object(a.jsxs)("div",{style:{fontWeight:400,minWidth:100,display:"inline-block",padding:5},children:[t,":"]}),Object(a.jsx)("span",{style:{padding:5,borderBottom:"solid 1px #ccc",display:"inline-block",minWidth:450},children:n})]})}var xt=Object(ae.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingBottom:e.spacing(3)},formControl:{margin:e.spacing(1)},selectEmpty:{marginTop:e.spacing(2),marginRight:e.spacing(2),minWidth:"100px"}}}));function mt(e){var t=e.conditionValue,n=e.handleConditionChange;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:"description",children:[Object(a.jsx)("b",{children:"Condition"})," is SQL like condition that describes when the segment should be triggered. Please refer to documentation to see the syntax of conditions. Segment condition is ",Object(a.jsx)("b",{children:"required field"}),"."]}),Object(a.jsx)(Ve.a,{required:!0,id:"seg-condition",label:"Segment condition",multiline:!0,value:t,onChange:n}),Object(a.jsx)($e.a,{children:'Example: (scope="my-site1" OR scope="my-site2") AND event:type="order"'})]})}function ft(e){var t=e.descValue,n=e.handleDescChange;return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:"description",children:[Object(a.jsx)("b",{children:"Segment description"})," can be any string that describes the meaning of segment. For example the segment can be a group of frequent customers. Segment description is ",Object(a.jsx)("b",{children:"required field"}),"."]}),Object(a.jsx)(Ve.a,{id:"seg-desc",label:"Segemnt description",value:t,onChange:n}),Object(a.jsx)($e.a,{children:"Example: Frequent customers who made purchase at least 3 time a month."})]})}function gt(e){var t=e.nameValue,n=e.handleNameChange,c=e.scope,r=e.handleScopeChange,s=xt();return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("div",{className:"description",children:["Set ",Object(a.jsx)("b",{children:"scope and segment name"}),". ",Object(a.jsx)("b",{children:"Scope"})," is an id of your site and ",Object(a.jsx)("b",{children:"segment"})," name can be any string that identifies segment. Segment name is ",Object(a.jsx)("b",{children:"required field"}),". Segemnt id is made out of segment name by replacing spaces with hyphens and lowering the string."]}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("div",{style:{verticalAlign:"bottom"},children:[Object(a.jsxs)(Ye.a,{value:c,onChange:r,inputProps:{name:"scope",id:"scope-select"},className:s.selectEmpty,children:[Object(a.jsx)(Xe.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),Object(a.jsx)(Xe.a,{value:"site-1",children:"site-1"}),Object(a.jsx)(Xe.a,{value:"site-2",children:"site-2"}),Object(a.jsx)(Xe.a,{value:"site-3",children:"site-3"})]}),Object(a.jsx)($e.a,{children:"Scope"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Ve.a,{required:!0,id:"seg-name",label:"Segment name",value:t,onChange:n}),Object(a.jsx)($e.a,{children:"Example: Frequent customers"})]})]})]})}function vt(e){var t=e.scope,n=e.name,c=e.desc,r=e.condition,s=e.handleReset,o=xt(),l=i.a.useState(!1),d=Object(te.a)(l,2),j=d[0],u=(d[1],i.a.useState(!1)),b=Object(te.a)(u,2),h=b[0],O=b[1],p=function(e){O(e)},x=i.a.useState(""),m=Object(te.a)(x,2),f=m[0],g=m[1],v=i.a.useState(""),y=Object(te.a)(v,2),C=y[0],S=y[1],N=function(e){g(e)},w=function(e){S(e)};return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(J.a,{children:"All steps completed - here is your segment summary"}),Object(a.jsxs)("div",{style:{marginTop:20},children:[Object(a.jsx)(pt,{name:"Scope",value:t}),Object(a.jsx)(pt,{name:"Name",value:n}),Object(a.jsx)(pt,{name:"Description",value:c}),Object(a.jsx)(pt,{name:"Condition",value:r})]}),function(e,t){if(""!==e)return Object(a.jsxs)(ee.a,{severity:t,style:{marginTop:20},children:[Object(a.jsx)(st.a,{children:t.toUpperCase()}),Object(a.jsx)("pre",{style:{width:"515px",overflow:"auto"},children:e})]})}(f,C),Object(a.jsxs)("div",{style:{marginTop:10},children:[Object(a.jsx)(Je.a,{onClick:function(){!function(e,t,n,a){try{t(),at({"Content-type":"application/json"}).post("/segment",e).then((function(e){n({data:e.data})})).catch((function(e){a(e)}))}catch(c){a(c)}}({scope:t,name:n,desc:c,condition:r},(function(){p(!0),w("loading"),N("Loading")}),(function(e){w("success"),N("Segment created."),p(!1)}),(function(e){p(!1),w("error"),"undefined"!=typeof e.response?N(e.response.data.detail):N(e.toString())}))},className:o.button,variant:"contained",color:"primary",disabled:h,children:"Submit"}),Object(a.jsx)(Je.a,{onClick:function(){s(),p(!1)},className:o.button,disabled:j,children:"Back"})]})]})}function yt(){var e=xt(),t=i.a.useState(0),n=Object(te.a)(t,2),c=n[0],r=n[1],s=i.a.useState(""),o=Object(te.a)(s,2),l=o[0],d=o[1],j=function(e){d(e.target.value)},u=i.a.useState(""),b=Object(te.a)(u,2),h=b[0],O=b[1],p=function(e){O(e.target.value)},x=i.a.useState(""),m=Object(te.a)(x,2),f=m[0],g=m[1],v=function(e){g(e.target.value)},y=i.a.useState(""),C=Object(te.a)(y,2),S=C[0],N=C[1],w=function(e){N(e.target.value)},R=["Select scope and segment name","Type segemnt description","Create condition","Submit segment"],k=function(){r((function(e){return e+1}))},T=function(){r((function(e){return e-1}))},E=function(){T()},L=function(e){switch(e){case 0:return Object(a.jsx)(gt,{nameValue:f,handleNameChange:v,scope:l,handleScopeChange:j});case 1:return Object(a.jsx)(ft,{descValue:S,handleDescChange:w});case 2:return Object(a.jsx)(mt,{conditionValue:h,handleConditionChange:p});case 3:return Object(a.jsx)(vt,{scope:l,name:f,desc:S,condition:h,handleReset:E});default:return"Unknown step"}},A=function(){if(c<R.length-1)return Object(a.jsxs)(i.a.Fragment,{children:[0!==c&&Object(a.jsx)(Je.a,{disabled:0===c,onClick:T,className:e.button,children:"Back"}),Object(a.jsx)(Je.a,{variant:"contained",color:"primary",onClick:k,className:e.button,children:"Next"})]})};return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(Ge.a,{activeStep:c,orientation:"vertical",children:R.map((function(t,n){return Object(a.jsxs)(Qe.a,{onClickCapture:function(){r(n)},children:[Object(a.jsx)(ze.a,{children:t}),Object(a.jsxs)(Ke.a,{children:[Object(a.jsx)(Ze.a,{className:e.formControl,children:L(n)}),Object(a.jsx)("div",{className:e.actionsContainer,children:Object(a.jsx)("div",{children:A()})})]})]},t)}))})})}n(313);function Ct(){var e=Object(c.useState)(!1),t=Object(te.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),o=Object(te.a)(s,2),l=o[0],d=o[1],j=Object(c.useState)("http://localhost:8181"),u=Object(te.a)(j,2),b=u[0],h=u[1],O=function(e){d(e.target.value)},p=function(e){h(e.target.value)},x=function(){at({"Content-type":"application/json"}).post("scope",{name:l,host:b}).then((function(e){r(!0),S()})).catch((function(e){r(!1)}))},m=function(){return n?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(J.a,{variant:"h6",children:"Scope created"}),Object(a.jsx)("div",{className:"ScopeDesc",style:{marginTop:20},children:"Please find tracker javascript code in your scope tracker tab and paste it in your head tag of your web page. "})]}):""};var f=i.a.useState(0),g=Object(te.a)(f,2),v=g[0],y=g[1],C=["Type scope","Type context server api host","Tracker code"],S=function(){y((function(e){return e+1}))},N=function(){y((function(e){return e-1}))},w=function(){if(v<C.length-2)return Object(a.jsxs)(i.a.Fragment,{children:[0!==v&&Object(a.jsx)(Je.a,{disabled:0===v,onClick:N,className:"Button",children:"Back"}),Object(a.jsx)(Je.a,{variant:"contained",color:"primary",onClick:S,className:"Button",children:"Next"})]})},R=function(e){switch(e){case 0:return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:"ScopeDesc",children:"Type scope name. Scope is usually a namespace for all your events and it is associated with your file or business activity."}),Object(a.jsx)("div",{style:{marginBottom:20,width:"80%"},children:Object(a.jsx)(Ve.a,{onChange:O,value:l,label:"Scope"})})]});case 1:return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:"ScopeDesc",children:"Tracker API URL is a host name and port where the context server api is located. Usually it is http://localhost:8181 or for dockerized platforms http://context-server:8181."}),Object(a.jsx)("div",{style:{marginBottom:20,width:"80%"},children:Object(a.jsx)(Ve.a,{onChange:p,label:"Tracker API",value:b})}),Object(a.jsx)(Je.a,{onClick:x,variant:"contained",color:"primary",children:"Submit"})]});case 2:return Object(a.jsx)(m,{});default:return"Unknown step"}};return Object(a.jsx)(Ge.a,{activeStep:v,orientation:"vertical",children:C.map((function(e,t){return Object(a.jsxs)(Qe.a,{onClickCapture:function(){y(t)},children:[Object(a.jsx)(ze.a,{children:e}),Object(a.jsxs)(Ke.a,{children:[Object(a.jsx)(Ze.a,{children:R(t)}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:w()})})]})]},e)}))})}var St=n(421),Nt=n(143),wt=n(86),Rt=Object(wt.a)({typography:{fontFamily:["Lato"].join(",")},palette:{primary:{main:"#2196f3"},secondary:{main:"#EF6C00"},error:{main:Nt.a.A400},background:{default:"#bbb"},text:{primary:"#000"}}}),kt=Object(wt.a)({palette:{primary:{main:"#19857b"},secondary:{light:"#cF5C00",main:"#EF6C00",contrastText:"#ffcc00"},background:{default:"#fff"},text:{primary:"#000"}}}),Tt=Object(wt.a)({palette:{primary:{main:"#fff"},secondary:{light:"#fff",main:"#fff",contrastText:"#ffcc00"},background:{default:"#2196f3",paper:"inherit"},text:{primary:"#fff",secondary:"#bbb",disabled:"#999"}}});n(314);function Et(e){var t=e.children,n=e.value,c=e.index,i=Object(Q.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(H.a)(Object(H.a)({role:"tabpanel",hidden:n!==c,id:"scrollable-auto-tabpanel-".concat(c),"aria-labelledby":"scrollable-auto-tab-".concat(c)},i),{},{children:n===c&&Object(a.jsx)(Me.a,{p:0,children:t})}))}function Lt(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}function At(){var e=Object(ae.a)((function(e){return{tabs:{flexGrow:1,width:"700px",position:"fixed",zIndex:2,backgroundColor:"#2196f3"},fab:{position:"fixed",bottom:e.spacing(4),right:e.spacing(4)},popOver:{marginTop:"48px",padding:"10px 30px 10px 0px",width:"700px",height:"350px"}}}))(),t=(Object(Ue.a)(),i.a.useState(null)),n=Object(te.a)(t,2),c=n[0],r=n[1],s=i.a.useState(0),o=Object(te.a)(s,2),l=o[0],d=o[1],j=Boolean(c),u=j?"create-popover":void 0;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(He.a,{color:"secondary","aria-label":"add",className:e.fab,children:[Object(a.jsx)(qe.a,{onClick:function(e){r(e.currentTarget)}}),Object(a.jsx)(St.a,{theme:Tt,children:Object(a.jsx)(Fe.a,{id:u,open:j,anchorEl:c,onClose:function(){r(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:525,horizontal:"right"},elevation:3,children:Object(a.jsxs)("div",{className:"CreatePopOver",children:[Object(a.jsx)("div",{className:"PopOverTabs",children:Object(a.jsxs)(De.a,{value:l,onChange:function(e,t){d(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs",children:[Object(a.jsx)(Be.a,Object(H.a)({label:"Scope"},Lt(0))),Object(a.jsx)(Be.a,Object(H.a)({label:"Rule"},Lt(1))),Object(a.jsx)(Be.a,Object(H.a)({label:"Segement"},Lt(2)))]})}),Object(a.jsxs)("div",{className:"PopOverTabContent",children:[Object(a.jsx)(Et,{value:l,index:0,children:Object(a.jsx)(Ct,{})}),Object(a.jsx)(Et,{value:l,index:1,children:Object(a.jsx)(Ot,{})}),Object(a.jsx)(Et,{value:l,index:2,children:Object(a.jsx)(yt,{})})]})]})})})]})})}var _t=Object(q.b)((function(e){return{progressBar:e.progressReducer}}))((function(e){var t=e.progressBar,n=e.children,c=e.title,i=e.showSearch,r=Object(q.c)(),s=Ie()((function(e){return{root:{width:"100%"},progress:{background:"transparent"}}}))();return Object(a.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(a.jsx)(Ae,{runQuery:function(e){r(F({query:e}))},title:c,showSearch:i}),Object(a.jsxs)("div",{className:"contentPane",children:[Object(a.jsx)("div",{className:s.root,children:Object(a.jsx)(_e.a,{className:s.progress,color:"secondary",variant:"determinate",value:t.progress})}),Object(a.jsx)("div",{className:"content",children:n})]}),Object(a.jsx)(At,{})]})})),Pt={BASE_FONT_FAMILY:"Roboto Mono, sans-serif",BASE_FONT_SIZE:"15px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"transparent",BASE_COLOR:"#bbb",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"#444",OBJECT_VALUE_NULL_COLOR:"#64b5f6",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"green",OBJECT_VALUE_STRING_COLOR:"#0069c0",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"#0a0",OBJECT_VALUE_BOOLEAN_COLOR:"#a00",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"#aaa",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:8,ARROW_FONT_SIZE:10,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Roboto Mono, sans-serif",TREENODE_FONT_SIZE:"13px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:10,TABLE_BORDER_COLOR:"#888",TABLE_TH_BACKGROUND_COLOR:"white",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#0089e0",TABLE_DATA_BACKGROUND_IMAGE:" linear-gradient(to bottom, white, white 50%, rgb(234, 243, 243) 50%, rgb(234, 243, 243))",TABLE_DATA_BACKGROUND_SIZE:"100px 32px"},It=n(39),Dt=n(92),Bt=(n(336),n(220)),Ft=n.n(Bt);n(337);function Ut(e){var t=e.method,n=t.toUpperCase()+"Tag";return Object(a.jsx)("span",{className:n+" MethodTag",children:t.toUpperCase()})}n(338);function Wt(e){var t=Object.assign({},e),n="StatusCode"+t.children;return Object(a.jsx)("span",{className:n+" StatusCodeTag",children:t.children})}var qt=n(366);n(339);function Ht(){return Object(a.jsx)("div",{className:"CenteredCircularProgress",children:Object(a.jsx)(qt.a,{color:"secondary"})})}var Mt=n(225),Vt=n(219),Gt=n.n(Vt);var Qt=Object(q.b)((function(e){return{uqlStatement:e.uqlReducer}}),{})((function(e){var t=e.uqlStatement,n=i.a.useState(!1),r=Object(te.a)(n,2),s=r[0],o=r[1],l=i.a.useState(!1),d=Object(te.a)(l,2),j=d[0],u=d[1],b=i.a.useState(!1),h=Object(te.a)(b,2),O=h[0],p=h[1],x=i.a.useState(!1),m=Object(te.a)(x,2),f=m[0],g=m[1],v=i.a.useState(!1),y=Object(te.a)(v,2),C=y[0],S=y[1],N=i.a.useState(!1),w=Object(te.a)(N,2),R=w[0],k=w[1],T=i.a.useState("OK"),E=Object(te.a)(T,2),L=E[0],A=E[1],_=i.a.useState(!1),P=Object(te.a)(_,2),I=P[0],D=P[1],B=function(e){S(e),D(!1),k(!1)};Object(c.useEffect)((function(){ct(t.uql,"/console/uql2unomi/request",p,g,B)}),[t.uql]);var F,U=function(e){if(!1===e.error){var t=C;t.data.body=e.jsObject,S(t),A("OK"),D(!1)}else D(!0),A("ERROR "+e.error.reason+" (line: "+e.error.line+")")},W=function(e,t){return!0===t?Object(a.jsx)(Ht,{}):!1!==f?Object(a.jsx)("pre",{children:f}):"undefined"!==typeof e.data?Object(a.jsx)(Mt.a,{id:"a_unique_id",placeholder:e.data.body,locale:Gt.a,onChange:U,colors:{background:"transparent",default:"black",number:"green",keys:"rgb(68, 68, 68)",string:"rgb(0, 105, 192)",primitive:"rgb(170, 0, 0)",error:"darkred"},style:{body:{fontSize:"13px",lineHeight:"1.2"},warningBox:{background:"#ccc"},errorMessage:{fontSize:"15px",color:"black",margin:"-2px 0 0 0"}},width:"100%",height:"100%"}):void 0},q=function(e,t){if(!1===t&&"undefined"!==typeof e&&!1!==e)return Object(a.jsxs)(i.a.Fragment,{children:[e.data.method&&Object(a.jsx)(Ut,{method:e.data.method}),e.data.url&&Object(a.jsxs)("span",{children:["URL: ",e.data.url]}),e.data.expectedStatus&&Object(a.jsxs)("span",{children:["EXPECT: ",Object(a.jsx)(Wt,{children:e.data.expectedStatus})]})]})},H=function(e,t){if(!1===t&&"undefined"!==typeof e&&!1!==e)return Object(a.jsx)(i.a.Fragment,{children:e.data.status&&Object(a.jsxs)("span",{children:["RESPONSE: ",Object(a.jsx)(Wt,{children:e.data.status})]})})},M=function(e){var t=e.disable,n="RunQuery";!0===t&&(n="DisableQuery");return Object(a.jsx)("div",{className:n,onClick:function(){!1!==C&&!1===t&&function(e,t,n,a,c){(!(arguments.length>5&&void 0!==arguments[5])||arguments[5])&&(a(!1),c(!1),n(!0));try{at({"Content-type":"application/json"}).post(t,e).then((function(e){n(!1),c({data:e.data})})).catch((function(e){n(!1),"undefined"!=typeof e.response?a(e.response.data.detail):a(e.message)}))}catch(i){a(i.message)}}(C.data,"/console/uql2unomi/response",o,u,k)},children:Object(a.jsx)(Ft.a,{})})};return Object(a.jsxs)(Dt.a,{elevation:2,className:"QueryResponseColumns",children:[Object(a.jsx)("div",{className:"QueryResponseLeftColumn",children:(F=C,Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:"RequestInfo",children:q(F,O)}),Object(a.jsx)("div",{className:"RequestBody",children:W(F,O)}),Object(a.jsx)("div",{className:"RequestStatus",children:L})]}))}),Object(a.jsx)(M,{disable:I}),Object(a.jsx)("div",{className:"QueryResponseRightColumn",children:function(e){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("div",{className:"ResponseInfo",children:H(e,s)}),Object(a.jsx)("div",{className:"ResponseBody",children:(t=e,n=s,c=j,!0===n?Object(a.jsx)(Ht,{}):!1!==c?Object(a.jsx)("pre",{children:c}):"undefined"!==typeof t.data?Object(a.jsx)(It.a,{data:t.data.body,theme:Pt,expandLevel:3}):void 0)}),Object(a.jsx)("div",{className:"ResponseStatus",children:"OK"})]});var t,n,c}(R)})]})})),zt=Object(q.b)((function(e){return{uqlStatement:e.uqlReducer}}),{})((function(){return Object(a.jsx)("div",{className:"PagePane",children:Object(a.jsx)(Qt,{})})}));function Kt(){return localStorage.removeItem("auth-token"),Object(a.jsx)(V.a,{to:"/app/login"})}var Jt=n(442),Yt=n(367),Xt=n(233),Zt=n(427),$t=n(221),en=n.n($t),tn=n(426);function nn(e,t,n){if(n=n||[],"object"==typeof e)for(var a in e)nn(e[a],t?t+"["+a+"]":a,n);else n.push(t+"="+encodeURIComponent(e));return n.join("&")}var an=function(e,t){var n={username:e,password:t};return at({"Content-Type":"application/x-www-form-urlencoded"}).post("/token",nn(n))};function cn(){return Object(a.jsxs)(J.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Y.a,{color:"inherit",href:"http://kuptoo.pl/",children:"Prodi"})," ",(new Date).getFullYear(),"."]})}var rn=Object(ae.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"10px 20px",backgroundColor:"white",borderRadius:"5px",color:"black"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},input:{color:"black"},submit:{margin:e.spacing(3,0,2)}}})),sn=Object(q.b)(null,{showAlert:k})((function(e){var t=e.showAlert,n=rn(),i=Object(c.useState)(""),r=Object(te.a)(i,2),s=r[0],o=r[1],l=Object(c.useState)(""),d=Object(te.a)(l,2),j=d[0],u=d[1],b=Object(c.useState)(!1),h=Object(te.a)(b,2),O=h[0],p=h[1],x=(Object(V.h)().state||{from:{pathname:"/app"}}).from,m=Object(c.useState)(!1),f=Object(te.a)(m,2),g=f[0],v=f[1];return g?Object(a.jsx)(V.a,{to:x}):Object(a.jsx)(St.a,{theme:kt,children:Object(a.jsx)(tn.a,{component:"main",maxWidth:"xs",children:Object(a.jsxs)("div",{className:n.paper,children:[Object(a.jsx)(Jt.a,{className:n.avatar,children:Object(a.jsx)(en.a,{})}),Object(a.jsx)(J.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{onSubmitCapture:function(e){an(s,j).then((function(e){var t,n;t=e.data.access_token,localStorage.setItem("auth-token",t),n=e.data.roles,localStorage.setItem("auth-roles",JSON.stringify(n)),v(!0)})).catch((function(e){var n=e.message;"undefined"==typeof e.response?n="Api unavailable.":422===e.response.status?n="Bag request. Fill all fields.":"string"==typeof e.response.data.detail&&(n=e.response.data.detail),t({type:"error",message:n})})),e.preventDefault()},className:n.form,noValidate:!0,children:[Object(a.jsx)(Ve.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){o(e.target.value)}}),Object(a.jsx)(Ve.a,{style:{color:"black"},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){u(e.target.value)}}),Object(a.jsx)(Yt.a,{control:Object(a.jsx)(Xt.a,{value:"remember",color:"primary",onChange:function(e){p(e.target.checked)},checked:O}),label:"Remember me"}),Object(a.jsx)(Je.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign In"}),Object(a.jsxs)(Zt.a,{container:!0,children:[Object(a.jsx)(Zt.a,{item:!0,xs:!0,children:Object(a.jsx)(Y.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(a.jsx)(Zt.a,{item:!0})]})]}),Object(a.jsx)(Me.a,{mt:8,children:Object(a.jsx)(cn,{})})]})})})})),on=n(87);Object(q.b)((function(){return{}}),{showAlert:k})((function(e){var t=e.data,n=e.onClick,c=[{field:"scope",headerName:"Scope",flex:.3},{field:"type",headerName:"Type",flex:.3,renderCell:function(e){return Object(a.jsx)("span",{style:{textDecoration:"underline",cursor:"pointer"},onClickCapture:function(){return n(e.getValue("eventId"))},children:e.value})}},{field:"timestamp",headerName:"Timestamp",flex:.4,type:"dateTime"}];return Object(a.jsx)(on.a,{rows:t,rowHeight:35,pageSize:20,columns:c})})),n(103);var ln=n(428),dn=n(429),jn=(n(340),Object(ae.a)((function(){return{root:{width:"100%",cursor:"pointer",maxHeight:70,background:"white",borderBottom:"solid 1px #ddd"}}})));function un(e){var t=e.data,n=e.onClick,c=jn();return Object(a.jsx)(ln.a,{className:c.root,children:Object(a.jsx)(dn.a,{avatar:Object(a.jsx)(Jt.a,{"aria-label":"event",className:"EventAvatar",children:"E"}),title:t.scope+": "+t.type,subheader:t.timestamp,onClick:function(e){n(t.eventId)}})})}function bn(e){var t=e.onEnterPressed,n=e.onChange,c=e.label,r=e.helper,s=e.initValue,o=e.error,l=e.variant,d=Object(ae.a)((function(){return{root:{width:"100%"}}}))(),j=i.a.useState(s),u=Object(te.a)(j,2),b=u[0],h=u[1];return Object(a.jsxs)("div",{className:d.root,children:[Object(a.jsx)(Ve.a,{id:"search-input",label:c,value:b,onChange:function(e){"undefined"!=typeof n&&(n(e),e.preventDefault()),h(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&"undefined"!=typeof t&&(t(e.target.value),e.preventDefault(),console.log("key press"))},className:d.root,error:o,variant:l}),Object(a.jsx)($e.a,{children:r})]})}n(341);var hn=Object(q.b)((function(){return{}}),{showAlert:k})((function(e){var t=e.filterLabel,n=e.filterHelper,r=e.filterKey,s=e.endPoinyUrl,o=e.renderList,l=e.forceReload,d=i.a.useState(!1),j=Object(te.a)(d,2),u=(j[0],j[1]),b=i.a.useState(!1),h=Object(te.a)(b,2),O=h[0],p=h[1],x=i.a.useState(!1),m=Object(te.a)(x,2),f=m[0],g=m[1],v=i.a.useState(localStorage.getItem(r)),y=Object(te.a)(v,2),C=y[0],S=y[1],N=i.a.useState(!1),w=Object(te.a)(N,2),R=w[0],T=w[1],E=i.a.useState(0),L=Object(te.a)(E,2),A=L[0],_=L[1],P=Object(q.c)(),I=function(e){return function(){var t=function(){};e&&(t=function(e){u(e),T(!1)}),ct(C,s,t,(function(e){p(e),T(!0)}),(function(e){g(e),T(!1)}),e)}};return Object(c.useEffect)((function(){I(!0)();var e=setInterval(I(!1),5e3);return function(){return clearInterval(e)}}),[C,A,l]),Object(a.jsxs)("div",{className:"FilterListWrapper",children:[Object(a.jsx)("div",{className:"FilterInput",children:Object(a.jsx)(bn,{label:t,helper:n,onEnterPressed:function(e){localStorage.setItem(r,e),S(e),_(Math.random())},initValue:C,style:{width:"100%"},error:R,variant:"outlined"})}),Object(a.jsx)("div",{className:"FilterList",children:function(){if(!1!==O&&(P(k({type:"warning",message:O,hideAfter:6e3})),p(!1)),!1!==f)return o(f.data)}()})]})}));n(342);function On(e){var t=e.list,n=e.detail;return Object(a.jsxs)(Dt.a,{elevation:2,className:"ListDetailView",children:[Object(a.jsx)("div",{className:"ListDetailViewLeftColumn",children:t()}),Object(a.jsx)("div",{className:"ListDetailViewRightColumn",children:n()})]})}n(84),n(131),n(343);function pn(e){e.title;var t=Object(Q.a)(e,["title"]);return Object(a.jsx)("div",{className:"DetailBox",children:t.children})}function xn(e){var t=e.children,n=e.value,c=e.index,i=Object(Q.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(H.a)(Object(H.a)({role:"tabpanel",hidden:n!==c,id:"tabpanel-".concat(c),"aria-labelledby":"tab-".concat(c)},i),{},{children:n===c&&Object(a.jsx)("div",{children:t})}))}n(344);function mn(e){var t=Object.assign({},e);return Object(a.jsx)("div",{className:"MiniHeader",children:t.children})}n(345);var fn=function(e){var t=e.label;return Object(a.jsx)("div",{className:"DetailHeader",children:Object(a.jsx)("div",{className:"DetailLabel",children:t})})},gn=n(222),vn=n.n(gn),yn=(n(346),function(e){var t=e.label,n=e.value;return Object(a.jsxs)("div",{className:"DetailKeyValue",children:[Object(a.jsx)("div",{title:t,className:"DetailKey",children:t}),Object(a.jsx)("div",{title:n,className:"DetailValue",children:n})]})});function Cn(e){var t=e.properties;var n=vn.a.dot(t);return Object(a.jsx)(i.a.Fragment,{children:Object.entries(n).map((function(e){var t,n=Object(te.a)(e,2),c=n[0],i=n[1];return Object(a.jsx)(yn,{label:c,value:null===i||(t=i,t&&0===Object.keys(t).length&&t.constructor===Object)?"null or {}":i.toString()},c)}))})}n(104);function Sn(e){var t=e.data,n=i.a.useState(0),c=Object(te.a)(n,2),r=c[0],s=c[1];function o(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}function l(e){var t=e.data,n={"Event Id":t.itemId,"Session id":t.sessionId,"Profile id":t.profileId};return Object(a.jsx)(Cn,{properties:n})}function d(e){var t=e.data,n={"Event Type":t.eventType,Scope:t.scope,Persistent:t.persistent,Version:t.version,Timestamp:t.timeStamp};return Object(a.jsx)(Cn,{properties:n})}return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(fn,{label:t.itemId}),Object(a.jsxs)(De.a,{value:r,onChange:function(e,t){s(t)},variant:"fullWidth",children:[Object(a.jsx)(Be.a,Object(H.a)({label:"Meta"},o(0))),Object(a.jsx)(Be.a,Object(H.a)({label:"Properties"},o(1))),Object(a.jsx)(Be.a,Object(H.a)({label:"Unomi"},o(2)))]}),Object(a.jsxs)("div",{className:"RightTabScroller",children:[Object(a.jsxs)(xn,{value:r,index:0,children:[Object(a.jsx)(mn,{children:"Ids"}),Object(a.jsx)(l,{data:t}),Object(a.jsx)(mn,{children:"Other"}),Object(a.jsx)(d,{data:t})]}),Object(a.jsxs)(xn,{value:r,index:1,children:[Object(a.jsx)(mn,{children:"Properties"}),Object(a.jsx)(Cn,{properties:t.properties}),Object(a.jsx)(mn,{children:"Source"}),Object(a.jsx)(Cn,{properties:t.source}),Object(a.jsx)(mn,{children:"Target"}),Object(a.jsx)(Cn,{properties:t.target})]}),Object(a.jsxs)(xn,{value:r,index:2,children:[Object(a.jsxs)(mn,{children:["GET /event/",t.itemId]}),Object(a.jsx)(pn,{children:Object(a.jsx)(It.a,{data:t,theme:Pt,expandLevel:3})})]})]})]})}var Nn=Object(q.b)((function(e){return{notification:e.notificationReducer}}))((function(){var e=i.a.useState(!1),t=Object(te.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),s=Object(te.a)(r,2),o=(s[0],s[1]),l=i.a.useState(!1),d=Object(te.a)(l,2),j=d[0],u=d[1],b=function(e){console.log(e),it("/event/"+e,c,o,u)};return Object(a.jsx)("div",{className:"PagePane",children:Object(a.jsx)(On,{list:function(){return Object(a.jsx)(hn,{endPoinyUrl:"/event/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(un,{data:e,onClick:b},t)}))},filterLabel:"Type condition to filter events",filterHelper:'Example: scope="my-site-1" AND type="view"',filterKey:"filterEventQuery"})},detail:function(){return!1!==j?Object(a.jsx)(Sn,{data:j.data}):!0===n?Object(a.jsx)(Ht,{}):void 0}})})}));Object(q.b)((function(){return{}}),{showAlert:k})((function(e){var t=e.onClick,n=e.data,c=[{field:"scope",headerName:"Scope",width:100},{field:"name",headerName:"Name",flex:1,renderCell:function(e){return Object(a.jsx)("span",{style:{textDecoration:"underline",cursor:"pointer"},onClickCapture:function(){return t(e.getValue("ruleId"))},children:e.value})}}];return Object(a.jsx)(on.a,{rows:n,rowHeight:35,pageSize:20,columns:c})})),n(347);var wn=Object(ae.a)((function(){return{root:{width:"100%",cursor:"pointer",maxHeight:70,background:"white",borderBottom:"solid 1px #ddd"}}}));function Rn(e){var t=e.data,n=e.onClick,c=wn();return Object(a.jsx)(ln.a,{className:c.root,children:Object(a.jsx)(dn.a,{avatar:Object(a.jsx)(Jt.a,{"aria-label":"rule",className:t.metadata.enabled?"RuleAvatarEnabled":"RuleAvatarDisabled",children:"R"}),title:t.metadata.name,subheader:Object(a.jsx)("span",{style:{fontWeight:300},children:t.metadata.scope}),onClick:function(e){n(t.metadata.id)}})})}var kn=n(368),Tn=n(114),En=n.n(Tn),Ln=n(430),An=n(434),_n=n(432),Pn=n(433),In=n(431);function Dn(e){var t=e.open,n=e.title,c=e.content,i=e.onAgree,r=e.onClose;return Object(a.jsxs)(Ln.a,{open:t,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(In.a,{id:"alert-dialog-title",children:n}),Object(a.jsx)(_n.a,{children:Object(a.jsx)(Pn.a,{id:"alert-dialog-description",children:c})}),Object(a.jsxs)(An.a,{children:[Object(a.jsx)(Je.a,{onClick:r,color:"primary",children:"No"}),Object(a.jsx)(Je.a,{onClick:i,color:"primary",autoFocus:!0,children:"Yes"})]})]})}var Bn=n(223),Fn=n.n(Bn)()((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,minWidth:72}}}))((function(e){return Object(a.jsx)(Be.a,Object(H.a)({},e))}));var Un=Object(q.b)((function(e){return{alert:e.showAlert}}),{openRightPaper:x})((function(e){var t=e.data,n=e.onDelete,c=e.openRightPaper,r=i.a.useState(0),s=Object(te.a)(r,2),o=s[0],l=s[1],d=i.a.useState(!1),j=Object(te.a)(d,2),u=(j[0],j[1]),b=i.a.useState(!1),h=Object(te.a)(b,2),O=(h[0],h[1]),p=i.a.useState(!1),x=Object(te.a)(p,2),m=x[0],f=x[1],g=i.a.useState(!1),v=Object(te.a)(g,2),y=v[0],C=v[1],S=En()({typography:{body1:{fontSize:14}}}),N=function(e){var t=e.label,n=e.value,c=e.handleChange;return Object(a.jsxs)("div",{className:"RuleSwitch",children:[Object(a.jsx)("div",{className:"RuleSwitchLabel",children:t}),Object(a.jsx)(kn.a,{checked:n,onChange:c})]})},w=function(e){var t=e.data;return!0===t.unomi.metadata.synchronized?Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(mn,{children:"WHEN"}),Object(a.jsx)(pn,{children:t.doc.condition}),Object(a.jsx)(mn,{children:"THEN"}),Object(a.jsx)(pn,{children:t.doc.actions}),Object(a.jsx)(mn,{children:"UQL create statement"}),Object(a.jsx)(pn,{children:t.doc.uql})]}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(mn,{children:"Missing data"}),Object(a.jsx)(pn,{children:"This rule was not creates with TRACARDI. You can still see metadata or Unomi data."})]})};function R(e){return{id:"rule-tab-".concat(e),"aria-controls":"rule-tabpanel-".concat(e)}}return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(fn,{label:t.unomi.metadata.name}),Object(a.jsx)("div",{children:Object(a.jsxs)(De.a,{value:o,onChange:function(e,n){t&&!0===t.unomi.metadata.synchronized&&2===n&&ct(t.doc.uql,"/rule/query/json",u,O,f),l(n)},variant:"fullWidth",children:[Object(a.jsx)(Fn,Object(H.a)(Object(H.a)({label:"UQL"},R(0)),{},{disabled:!t.unomi.metadata.synchronized})),Object(a.jsx)(Fn,Object(H.a)({label:"Metadata"},R(1))),Object(a.jsx)(Fn,Object(H.a)({label:"Stats"},R(2))),Object(a.jsx)(Fn,Object(H.a)({label:"Unomi"},R(3)))]})}),Object(a.jsxs)("div",{className:"RightTabScroller",style:{height:"calc(100% - 150px)"},children:[Object(a.jsx)(xn,{value:o,index:0,children:Object(a.jsx)(w,{data:t})}),Object(a.jsxs)(xn,{value:o,index:1,children:[Object(a.jsx)(mn,{children:"description"}),Object(a.jsx)(pn,{children:t.unomi.metadata.description}),Object(a.jsx)(mn,{children:"scope"}),Object(a.jsx)(pn,{children:t.unomi.metadata.scope}),Object(a.jsx)(mn,{children:"metadata"}),Object(a.jsxs)(St.a,{theme:S,children:[Object(a.jsx)(N,{label:"Enabled",value:t.unomi.metadata.enabled}),Object(a.jsx)(N,{label:"Read only",value:t.unomi.metadata.readOnly}),Object(a.jsx)(N,{label:"Hidden",value:t.unomi.metadata.hidden}),Object(a.jsx)(N,{label:"Missing plugins",value:t.unomi.metadata.missingPlugins})]}),Object(a.jsx)(mn,{children:"tags"})]}),Object(a.jsx)(xn,{value:o,index:2,children:"stats"}),Object(a.jsxs)(xn,{value:o,index:3,children:[Object(a.jsxs)(mn,{children:["GET /rule/",t.unomi.metadata.id,"/detailed"]}),Object(a.jsx)(pn,{children:Object(a.jsx)(It.a,{data:t,theme:Pt,expandLevel:3})}),function(){if(m.data)return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(mn,{children:["UNOMI API QUERY: ",m.data[1]," ",m.data[0]]}),Object(a.jsx)(pn,{children:Object(a.jsx)(It.a,{data:m.data[2],theme:Pt,expandLevel:3})})]})}()]})]}),Object(a.jsxs)("div",{className:"DetailActionButtons",children:[Object(a.jsx)(Je.a,{onClick:function(){c({content:Object(a.jsx)(Ot,{}),width:1e3,anchor:"right"})},color:"primary",children:"Add"}),Object(a.jsx)(Je.a,{onClick:function(){C(!0)},variant:"outlined",color:"primary",children:"Delete"}),Object(a.jsx)(Dn,{open:y,title:"Do you want to delete this rule?",content:"This action can not be undone.",onClose:function(){C(!1)},onAgree:function(){C(!1),n(t.unomi.metadata.id)}})]})]})})),Wn=Object(q.b)((function(e){return{notification:e.notificationReducer}}),{openRightPaper:x})((function(e){e.openRightPaper;var t=i.a.useState(!1),n=Object(te.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),o=Object(te.a)(s,2),l=(o[0],o[1]),d=i.a.useState(!1),j=Object(te.a)(d,2),u=j[0],b=j[1],h=i.a.useState(!1),O=Object(te.a)(h,2),p=(O[0],O[1]),x=function(){},m=function(e){p(e),b(!1)},f=function(e){it("/rule/"+e,r,l,b)},g=function(e){rt("/rule/"+e,x,x,m)};return Object(a.jsx)("div",{className:"PagePane",children:Object(a.jsx)(On,{list:function(){return Object(a.jsx)(hn,{endPoinyUrl:"/rule/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(Rn,{data:e,onClick:f},t)}))},filterLabel:"Type condition to filter rules",filterHelper:'Example: scope="my-site-1" AND type="view"',filterKey:"filterRuleQuery"})},detail:function(){return!1!==u?Object(a.jsx)(Un,{data:u.data,onDelete:g}):!0===c?Object(a.jsx)(Ht,{}):void 0}})})}));Object(q.b)((function(){return{}}),{showAlert:k})((function(e){var t=e.data,n=e.onClick,c=[{field:"scope",headerName:"Scope",flex:.3},{field:"name",headerName:"Name",flex:.3,renderCell:function(e){return Object(a.jsx)("span",{style:{textDecoration:"underline",cursor:"pointer"},onClickCapture:function(){return n(e.getValue("segmentId"))},children:e.value})}},{field:"description",headerName:"Description",flex:.4}];return Object(a.jsx)(on.a,{rows:t,rowHeight:35,pageSize:20,columns:c})}));function qn(e){var t=e.data,n=e.onDelete,c=i.a.useState(0),r=Object(te.a)(c,2),s=r[0],o=r[1],l=i.a.useState(!1),d=Object(te.a)(l,2),j=d[0],u=d[1],b=En()({typography:{body1:{fontSize:14}}}),h=function(e){var t=e.label,n=e.value,c=e.handleChange;return Object(a.jsxs)("div",{className:"RuleSwitch",children:[Object(a.jsx)("div",{className:"RuleSwitchLabel",children:t}),Object(a.jsx)(kn.a,{checked:n,onChange:c})]})},O=function(e){var t=e.data;if(!0===t.meta.synchronized)return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(mn,{children:"WHEN"}),Object(a.jsx)(pn,{children:t.doc.condition}),Object(a.jsx)(mn,{children:"UQL create statement"}),Object(a.jsx)(pn,{children:t.doc.uql})]})};function p(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(fn,{label:t.meta.name}),Object(a.jsxs)(De.a,{value:s,onChange:function(e,t){o(t)},variant:"fullWidth",children:[Object(a.jsx)(Be.a,Object(H.a)({label:"Meta"},p(0))),Object(a.jsx)(Be.a,Object(H.a)(Object(H.a)({label:"UQL"},p(1)),{},{disabled:!t.meta.synchronized})),Object(a.jsx)(Be.a,Object(H.a)({label:"Unomi"},p(2)))]}),Object(a.jsxs)("div",{className:"RightTabScroller",style:{height:"calc(100% - 150px)"},children:[Object(a.jsxs)(xn,{value:s,index:0,children:[Object(a.jsx)(mn,{children:"description"}),Object(a.jsx)(pn,{children:t.meta.description}),Object(a.jsx)(mn,{children:"scope"}),Object(a.jsx)(pn,{children:t.meta.scope}),Object(a.jsx)(mn,{children:"metadata"}),Object(a.jsxs)(St.a,{theme:b,children:[Object(a.jsx)(h,{label:"Enabled",value:t.meta.enabled}),Object(a.jsx)(h,{label:"Read only",value:t.meta.readOnly}),Object(a.jsx)(h,{label:"Hidden",value:t.meta.hidden})]}),Object(a.jsx)(mn,{children:"tags"})]}),Object(a.jsx)(xn,{value:s,index:1,children:Object(a.jsx)(O,{data:t})}),Object(a.jsxs)(xn,{value:s,index:2,children:[Object(a.jsxs)(mn,{children:["GET /segment/",t.meta.id]}),Object(a.jsx)(pn,{children:Object(a.jsx)(It.a,{data:t,theme:Pt,expandLevel:3})})]})]}),Object(a.jsxs)("div",{className:"DetailActionButtons",children:[Object(a.jsx)(Je.a,{onClick:function(){u(!0)},variant:"outlined",color:"primary",children:"Delete"}),Object(a.jsx)(Dn,{open:j,title:"Do you want to delete this segment?",content:"This action can not be undone.",onClose:function(){u(!1)},onAgree:function(){u(!1),n(t.meta.id)}})]})]})}n(348);var Hn=Object(ae.a)((function(){return{root:{width:"100%",cursor:"pointer",maxHeight:70,background:"white",borderBottom:"solid 1px #ddd"}}}));function Mn(e){var t=e.data,n=e.onClick,c=Hn();return Object(a.jsx)(ln.a,{className:c.root,children:Object(a.jsx)(dn.a,{avatar:Object(a.jsx)(Jt.a,{"aria-label":"rule",className:t.enabled?"SegmentAvatarDisabled":"SegmentAvatarEnabled",children:"S"}),title:t.name,subheader:Object(a.jsx)("span",{style:{fontWeight:300},children:t.scope}),onClick:function(e){n(t.segmentId)}})})}var Vn=Object(q.b)((function(e){return{notification:e.notificationReducer,uqlQuery:e.uqlReducer}}))((function(){var e=i.a.useState(!1),t=Object(te.a)(e,2),n=(t[0],t[1]),c=i.a.useState(!1),r=Object(te.a)(c,2),s=(r[0],r[1]),o=i.a.useState(!1),l=Object(te.a)(o,2),d=l[0],j=l[1],u=i.a.useState(!1),b=Object(te.a)(u,2),h=(b[0],b[1]),O=function(){},p=function(e){h(e),j(!1)},x=function(e){it("/segment/"+e,n,s,j)},m=function(e){rt("/segment/"+e,O,O,p)};return Object(a.jsx)("div",{className:"PagePane",children:Object(a.jsx)(On,{list:function(){return Object(a.jsx)(hn,{endPoinyUrl:"/segment/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(Mn,{data:e,onClick:x},t)}))},filterLabel:"Type condition to filter segments",filterHelper:'Example: scope="my-site-1" AND type="view"',filterKey:"segmentFilterQuery"})},detail:function(){if(0!=d)return Object(a.jsx)(qn,{data:d.data,onDelete:m})}})})})),Gn=n(144),Qn=Object(ae.a)((function(){return{root:{width:"100%",cursor:"pointer",maxHeight:70,background:"white",borderBottom:"solid 1px #ddd"},avatar:{background:Gn.a[500]}}}));function zn(e){var t=e.data,n=e.onClick,c=Qn();return Object(a.jsx)(ln.a,{className:c.root,children:Object(a.jsx)(dn.a,{avatar:Object(a.jsx)(Jt.a,{"aria-label":"scope",className:"ScopeAvatar",children:"S"}),title:t.doc.name,subheader:Object(a.jsx)("span",{style:{fontWeight:300},children:t.doc.host}),onClick:function(e){n(t.doc._id)}})})}n(349);function Kn(e){var t='<script type="text/javascript">\n        var unomiOption = {\n            scope: \''+e.scope+"',\n            url: '"+e.trackerHost+'\'\n        };\n        window.unomiTracker||(window.unomiTracker={}),function(){function e(e){for(unomiTracker.initialize({"Apache Unomi":unomiOption});n.length>0;){var r=n.shift(),t=r.shift();unomiTracker[t]&&unomiTracker[t].apply(unomiTracker,r)}}for(var n=[],r=["trackSubmit","trackClick","trackLink","trackForm","initialize","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","personalize"],t=0;t<r.length;t++){var i=r[t];window.unomiTracker[i]=function(e){return function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),n.push(r),window.unomiTracker}}(i)}unomiTracker.load=function(){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=unomiOption.url+"/tracker/unomi-tracker.min.js",n.addEventListener?n.addEventListener("load",function(n){"function"==typeof e&&e(n)},!1):n.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||e(window.event)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)},document.addEventListener("DOMContentLoaded",unomiTracker.load),unomiTracker.page()}();\n<\/script>';return Object(a.jsxs)(pn,{children:[Object(a.jsx)(mn,{children:"Please paste this code into your web page inside head tag in order to start collecting data."}),Object(a.jsx)("div",{className:"TrackerCode",children:t})]})}n(350);function Jn(e){var t=e.data,n=i.a.useState(0),c=Object(te.a)(n,2),r=c[0],s=c[1],o=i.a.useState(!1),l=Object(te.a)(o,2),d=l[0],j=l[1];function u(e){return{id:"rule-tab-".concat(e),"aria-controls":"rule-tabpanel-".concat(e)}}return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(fn,{label:t.doc.name}),Object(a.jsxs)(De.a,{value:r,onChange:function(e,t){s(t)},variant:"fullWidth",children:[Object(a.jsx)(Be.a,Object(H.a)({label:"Details"},u(0))),Object(a.jsx)(Be.a,Object(H.a)({label:"Tracker"},u(1))),Object(a.jsx)(Be.a,Object(H.a)({label:"Raw"},u(2)))]}),Object(a.jsxs)("div",{className:"RightTabScroller",style:{height:"calc(100% - 150px)"},children:[Object(a.jsxs)(xn,{value:r,index:0,children:[Object(a.jsx)(mn,{children:"Data"}),Object(a.jsx)(Cn,{properties:t.doc})]}),Object(a.jsxs)(xn,{value:r,index:1,children:[Object(a.jsx)(mn,{children:"Tracker code"}),Object(a.jsx)(Kn,{scope:t.doc.name,trackerHost:t.doc.host})]}),Object(a.jsxs)(xn,{value:r,index:2,children:[Object(a.jsx)(mn,{children:"GET /scope"}),Object(a.jsx)(pn,{children:Object(a.jsx)(It.a,{data:t,theme:Pt,expandLevel:3})})]})]}),Object(a.jsxs)("div",{className:"DetailActionButtons",children:[Object(a.jsx)(Je.a,{onClick:function(){j(!0)},variant:"outlined",color:"primary",children:"Delete"}),Object(a.jsx)(Dn,{open:d,title:"Do you want to delete this source?",content:"This action can not be undone.",onClose:function(){j(!1)},onAgree:function(){j(!1)}})]})]})}var Yn=Object(q.b)((function(e){return{notification:e.notificationReducer}}))((function(){var e=i.a.useState(!1),t=Object(te.a)(e,2),n=(t[0],t[1]),c=i.a.useState(!1),r=Object(te.a)(c,2),s=(r[0],r[1]),o=i.a.useState(!1),l=Object(te.a)(o,2),d=l[0],j=l[1],u=function(e){it("/scope/"+e,n,s,j)};return Object(a.jsx)("div",{className:"PagePane",children:Object(a.jsx)(On,{list:function(){return Object(a.jsx)(hn,{endPoinyUrl:"/scope/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(zn,{data:e,onClick:u},t)}))},filterLabel:"Type scope name to filter",filterHelper:"Example: my-site-1",filterKey:"filterScopeQuery"})},detail:function(){if(0!=d)return Object(a.jsx)(Jn,{data:d.data})}})})})),Xn=(n(351),Object(ae.a)((function(){return{root:{width:"100%",cursor:"pointer",maxHeight:70,background:"white",borderBottom:"solid 1px #ddd"}}})));function Zn(e){var t=e.data,n=e.onClick,c=Xn();return Object(a.jsx)(ln.a,{className:c.root,children:Object(a.jsx)(dn.a,{avatar:Object(a.jsx)(Jt.a,{"aria-label":"profile",className:"ProfileAvatar",children:"P"}),title:t.profileId,subheader:Object(a.jsx)("span",{style:{fontWeight:300},children:t.systemProperties.lastUpdated}),onClick:function(e){n(t.profileId)}})})}function $n(e){var t=e.data,n=i.a.useState(0),c=Object(te.a)(n,2),r=c[0],s=c[1];function o(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(fn,{label:t.itemId}),Object(a.jsxs)(De.a,{value:r,onChange:function(e,t){s(t)},variant:"fullWidth",children:[Object(a.jsx)(Be.a,Object(H.a)({label:"Meta"},o(0))),Object(a.jsx)(Be.a,Object(H.a)({label:"Properties"},o(1))),Object(a.jsx)(Be.a,Object(H.a)({label:"Unomi"},o(2)))]}),Object(a.jsxs)("div",{className:"RightTabScroller",children:[Object(a.jsxs)(xn,{value:r,index:0,children:[Object(a.jsx)(mn,{children:"Version"}),Object(a.jsx)(pn,{children:t.version})]}),Object(a.jsxs)(xn,{value:r,index:1,children:[Object(a.jsx)(mn,{children:"Properties"}),Object(a.jsx)(Cn,{properties:t.properties}),Object(a.jsx)(mn,{children:"System Properties"}),Object(a.jsx)(Cn,{properties:t.systemProperties}),Object(a.jsx)(mn,{children:"Segments"}),Object(a.jsx)(Cn,{properties:t.segments})]}),Object(a.jsxs)(xn,{value:r,index:2,children:[Object(a.jsxs)(mn,{children:["GET /profile/",t.itemId]}),Object(a.jsx)(pn,{children:Object(a.jsx)(It.a,{data:t,theme:Pt,expandLevel:3})})]})]})]})}var ea=Object(q.b)((function(e){return{notification:e.notificationReducer}}))((function(){var e=i.a.useState(!1),t=Object(te.a)(e,2),n=(t[0],t[1]),c=i.a.useState(!1),r=Object(te.a)(c,2),s=(r[0],r[1]),o=i.a.useState(!1),l=Object(te.a)(o,2),d=l[0],j=l[1],u=function(e){it("/profile/"+e,n,s,j)};return Object(a.jsx)("div",{className:"PagePane",children:Object(a.jsx)(On,{list:function(){return Object(a.jsx)(hn,{endPoinyUrl:"/profile/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(Zn,{data:e,onClick:u},t)}))},filterLabel:"Type condition to filter profiles",filterHelper:'Example: scope="my-site-1" AND properties.age=26',filterKey:"filterProfileQuery"})},detail:function(){if(0!=d)return Object(a.jsx)($n,{data:d.data})}})})})),ta=n(165),na=n.n(ta),aa=n(224),ca=n(74),ia=n(75),ra=n(89),sa=n(88),oa=n(166),la=n.n(oa),da=function(e){Object(ra.a)(n,e);var t=Object(sa.a)(n);function n(e){var a;return Object(ca.a)(this,n),a=t.call(this,e),la.a.setOptions({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),a}return Object(ia.a)(n,[{key:"render",value:function(){var e=this.props.text,t=la()(e||"");return Object(a.jsx)("div",{children:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})}}]),n}(i.a.Component),ja=function(e){var t=e.mdFile,i=Object(c.useState)(""),r=Object(te.a)(i,2),s=r[0],o=r[1];function l(){return(l=Object(aa.a)(na.a.mark((function e(t){var a,c;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(353)("./".concat(t,".md"));case 2:return a=e.sent,e.next=5,fetch(a.default);case 5:return c=e.sent,e.next=8,c.text();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){(function(e){return l.apply(this,arguments)})(t).then((function(e){o(e)}))})),Object(a.jsx)(da,{text:s})};function ua(e){return Object(a.jsx)(ee.a,Object(H.a)({elevation:6,variant:"filled"},e))}var ba=Object(q.b)((function(e){return{alert:e.alertReducer}}))((function(e){var t=e.alert,n=Object(q.c)(),c=function(){n(T())};return Object(a.jsxs)(M.a,{children:[Object(a.jsxs)(V.d,{children:[Object(a.jsx)(V.b,{exact:!0,path:"/app/login",children:Object(a.jsx)(sn,{})}),Object(a.jsx)(V.b,{exact:!0,path:"/app/logout",children:Object(a.jsx)(Kt,{})}),Object(a.jsx)(Z,{exact:!0,path:"/app/sources",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Sources",showSearch:!1,children:Object(a.jsx)(Yn,{})})}),Object(a.jsx)(Z,{exact:!0,path:"/app/events",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Events",showSearch:!1,children:Object(a.jsx)(Nn,{})})}),Object(a.jsx)(Z,{exact:!0,path:"/app/rules",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Rules",showSearch:!1,children:Object(a.jsx)(Wn,{})})}),Object(a.jsx)(Z,{exact:!0,path:"/app/segments",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Segments",showSearch:!1,children:Object(a.jsx)(Vn,{})})}),Object(a.jsx)(Z,{exact:!0,path:"/app/profiles",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Profiles",showSearch:!1,children:Object(a.jsx)(ea,{})})}),Object(a.jsx)(Z,{exact:!0,path:"/app/console",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Console",showSearch:!0,children:Object(a.jsx)(zt,{})})}),Object(a.jsx)(Z,{exact:!0,path:"/app",roles:["unomi"],children:Object(a.jsx)(_t,{title:"Console",showSearch:!0,children:Object(a.jsx)(zt,{})})}),Object(a.jsx)(V.b,{path:"/app/manual",children:Object(a.jsxs)(_t,{title:"Manual",showSearch:!0,children:[Object(a.jsx)(V.b,{exact:!0,path:"/app/manual/uql/select",children:Object(a.jsx)(ja,{mdFile:"uql/select"})}),Object(a.jsx)(V.b,{exact:!0,path:"/app/manual/uql/create",children:Object(a.jsx)(ja,{mdFile:"uql/create"})}),Object(a.jsx)(V.b,{exact:!0,path:"/app/manual/uql/delete",children:Object(a.jsx)(ja,{mdFile:"uql/delete"})}),Object(a.jsx)(V.b,{exact:!0,path:"/app/manual",children:Object(a.jsx)(ja,{mdFile:"start"})})]})})]}),Object(a.jsx)($.a,{open:t.show,autoHideDuration:t.hideAfter,onClose:c,children:Object(a.jsx)(ua,{onClose:c,severity:t.type,children:Object(a.jsx)("pre",{style:{margin:0,overflow:"auto",maxWidth:"500px"},children:t.message})})})]})}));o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(q.a,{store:W,children:Object(a.jsxs)(St.a,{theme:Rt,children:[Object(a.jsx)(r.a,{}),Object(a.jsx)(ba,{})]})})}),document.querySelector("#root")),l()},84:function(e,t,n){}},[[354,1,2]]]);
//# sourceMappingURL=main.b0f253a0.chunk.js.map