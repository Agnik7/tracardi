(this.webpackJsonptracardi=this.webpackJsonptracardi||[]).push([[0],{113:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},157:function(e,t,n){},159:function(e,t,n){},167:function(e,t,n){},269:function(e,t,n){},278:function(e,t,n){},284:function(e,t,n){},291:function(e,t,n){},415:function(e,t,n){},422:function(e,t,n){},423:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){},426:function(e,t,n){},427:function(e,t,n){},428:function(e,t,n){},448:function(e,t,n){},450:function(e,t,n){},451:function(e,t,n){},452:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},676:function(e,t,n){},677:function(e,t,n){},678:function(e,t,n){},679:function(e,t,n){},680:function(e,t,n){},681:function(e,t,n){},682:function(e,t,n){},683:function(e,t,n){},684:function(e,t,n){},685:function(e,t,n){},704:function(e,t,n){},705:function(e,t,n){},706:function(e,t,n){},707:function(e,t,n){},708:function(e,t,n){},709:function(e,t,n){},710:function(e,t,n){},711:function(e,t,n){},712:function(e,t,n){},713:function(e,t,n){},714:function(e,t,n){},716:function(e,t,n){},717:function(e,t,n){},718:function(e,t,n){},719:function(e,t,n){},720:function(e,t,n){},721:function(e,t,n){},724:function(e,t,n){},725:function(e,t,n){var a={"./start.md":[883,3],"./uql/create.md":[884,4],"./uql/delete.md":[885,5],"./uql/select.md":[886,6]};function i(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(a)},i.id=725,e.exports=i},726:function(e,t,n){},727:function(e,t,n){},743:function(e,t,n){},744:function(e,t,n){},874:function(e,t,n){},875:function(e,t,n){},876:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),c=n.n(i),s=n(957),r=n(23),o=n.n(r),l=(n(415),function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,972)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))}),d=n(40),j=function(e){return{name:e,initialState:{data:[],error:null,loading:!1},reducers:{loading:function(e){e.data=[],e.loading=!0,e.error=null},ready:function(e,t){e.data=t.payload.data,e.loading=!1,e.error=null},failed:function(e,t){e.data=[],e.loading=!1,e.error=t.payload.error}}}},u=Object(d.b)(j("select")),b=u.actions,O=(b.loading,b.ready,b.failed,u.reducer),h=Object(d.b)({name:"right-paper",initialState:{caseId:"",open:!1,width:1e3,anchor:"right",data:{}},reducers:{openRightPaper:function(e,t){e.caseId=t.payload.caseId,e.width=t.payload.width,"undefined"!==typeof t.payload.data&&(e.data=t.payload.data),e.anchor="undefined"!==typeof t.payload.anchor?t.payload.anchor:"right",e.open=!0},closeRightPaper:function(e){e.open=!1,e.caseId="",e.data={}}}}),m=h.actions,p=(m.openRightPaper,m.closeRightPaper,h.reducer),f=Object(d.b)({name:"notification",initialState:{value:0},reducers:{increaseNotificationNumber:function(e){e.value+=1},decreaseNotificationNumber:function(e){e.value-=1},resetNotificationNumber:function(e){e.value=0}}}),x=f.actions,v=(x.increaseNotificationNumber,x.decreaseNotificationNumber,x.resetNotificationNumber,f.reducer),g=Object(d.b)({name:"warning",initialState:{show:!1,message:"n/a"},reducers:{showWarningIcon:function(e,t){e.show=!0,e.message=t.payload.message},hideWarningIcon:function(e){e.show=!1,e.message=""}}}),y=g.actions,S=(y.showWarningIcon,y.hideWarningIcon,g.reducer),C=Object(d.b)({name:"alert",initialState:{message:"n/a",type:"info",show:!1,hideAfter:1e3},reducers:{showAlert:function(e,t){e.message=t.payload.message,e.type=t.payload.type,e.show=!0,e.hideAfter="undefined"!=typeof t.payload.hideAfter?t.payload.hideAfter:500},hideAlert:function(e){e.show=!1}}}),N=C.actions,k=N.showAlert,T=N.hideAlert,R=C.reducer,w=Object(d.b)({name:"progress",initialState:{progress:0},reducers:{increaseProgress:function(e,t){e.progress+=t.payload.value},decreaseProgress:function(e,t){e.progress-=t.payload.value},resetProgress:function(e){e.progress=0}}}),D=w.actions,L=(D.increaseProgress,D.decreaseProgress,D.resetProgress,w.reducer),E=Object(d.b)(j("event-data-grid")),A=E.actions,F=(A.loading,A.ready,A.failed,E.reducer),I=Object(d.b)({name:"uql-query",initialState:{uql:""},reducers:{runQuery:function(e,t){var n="none",a=t.payload.query.toLowerCase();a.startsWith("select event")?n="event":a.startsWith("select rule")?n="rule":a.startsWith("select segment")&&(n="segment"),e.uql=t.payload.query,e.uqlType=n,localStorage.setItem("uqlType",n)}}}),_=(I.actions.runQuery,I.reducer),q=Object(d.a)({reducer:{datasetSelectReducer:O,rightPaperReducer:p,notificationReducer:v,progressReducer:L,warningIconReducer:S,alertReducer:R,eventDataGridReducer:F,uqlReducer:_}}),P=n(46),z=n(5),B=n(15),M=n(64),H=n(36),W=n(964),U=n(960);n(422),n(269);function V(e){var t=e.height;return Object(a.jsx)("div",{className:"MainMenuItem",style:{minHeight:t}})}n(423);function J(e){var t=e.children;return Object(a.jsxs)("div",{className:"MainMenu",children:[Object(a.jsx)(V,{height:"45px"}),t,Object(a.jsx)(V,{height:"100%"})]})}n(424);function K(e){var t=e.children,n=e.style;return Object(a.jsx)("div",{className:"MainContent",style:n,children:t})}n(425);function Q(e){var t=e.children;return Object(a.jsx)("div",{className:"SubContent",children:t})}n(426),n(427);function G(e){var t=e.icon,n=e.title,i=e.link,c=e.onClick,s=e.className,r=s||"SocialButton";return Object(a.jsxs)("a",{className:r,href:i,onClick:c,children:[Object(a.jsx)("span",{className:"Icon",children:t}),n&&Object(a.jsx)("span",{className:"Label",children:n})]})}var Y=n(324),X=n(325),Z=n(326);function $(e){var t=e.title,n=e.children;return Object(a.jsxs)("div",{className:"SubMenu",children:[Object(a.jsxs)("div",{className:"SubMenuHeader",children:[Object(a.jsx)("span",{children:"Tracardi"})," ",t]}),n,Object(a.jsxs)("div",{className:"SubMenuFiller",children:[Object(a.jsxs)("div",{className:"Branding",children:[Object(a.jsxs)("div",{className:"BrandName",children:["TRACARDI ",Object(a.jsx)("span",{children:" ver. 0.3.0"})]}),Object(a.jsx)("div",{className:"TagName",children:"Customer Data Platform"})]}),Object(a.jsxs)("div",{className:"SupportUs",children:[Object(a.jsx)("div",{className:"Title",children:"Subscribe to support us:"}),Object(a.jsx)(G,{icon:Object(a.jsx)(Y.FaFacebookSquare,{size:20}),link:"https://www.facebook.com/TRACARDI/",className:"Social"}),Object(a.jsx)(G,{icon:Object(a.jsx)(X.GrTwitter,{size:20}),link:"https://twitter.com/tracardi",className:"Social"}),Object(a.jsx)(G,{icon:Object(a.jsx)(Z.IoLogoYoutube,{size:20}),link:"https://www.youtube.com/channel/UC0atjYqW43MdqNiSJBvN__Q",className:"Social"})]})]})]})}n(428);function ee(e){var t=e.children,n=e.link,i=e.defaultLink,c=Object(H.h)(),s=Object(H.g)(),r="SubMenuItem";"undefined"!==typeof i&&i.includes(c.pathname)||c.pathname===n?r+=" SubMenuSelectedItem":r+=" SubMenuNotSelectedItem";return Object(a.jsx)("div",{className:r,onClick:function(){s.push(n)},children:t})}function te(e){var t=e.icon,n=e.title,i=e.link,c=e.defaultLink,s=Object(H.h)(),r=Object(H.g)(),o="MainMenuItem";"undefined"!==typeof c&&c===s.pathname||s.pathname.substring(0,i.length)===i?o+=" MainMenuSelectedItem":o+=" MainMenuNotSelectedItem";return Object(a.jsxs)("div",{className:o,onClick:function(){r.push(i)},children:[Object(a.jsx)("div",{children:t}),Object(a.jsx)("div",{children:n})]})}var ne=n(145),ae=n(384);function ie(){localStorage.removeItem("auth-token")}function ce(){return localStorage.getItem("auth-token")}var se=n(148),re=n(926);function oe(){return Object(a.jsxs)(se.a,{variant:"body2",color:"textPrimary",align:"center",children:["You do not have rights to this page.",Object(a.jsx)(re.a,{color:"inherit",href:"/app/login",children:"Log-in"}),"."]})}function le(e){var t=e.children,n=e.location,i=e.roles,c=Object(ae.a)(e,["children","location","roles"]);return Object(a.jsx)(H.b,Object(B.a)(Object(B.a)({},c),{},{children:null!==ce()?function(e,t){var n=new Set(t);return Object(ne.a)(new Set(e)).filter((function(e){return n.has(e)}))}(JSON.parse(localStorage.getItem("auth-roles")),i).length>0?t:Object(a.jsx)(oe,{}):Object(a.jsx)(H.a,{to:{pathname:"/app/login",state:{from:n}}})}))}var de=n(245),je=n.n(de),ue=function(){var e=ce();return"Bearer "+(null==e?"None":e)},be=function(e){return e=Object(B.a)(Object(B.a)({},e),{},{Authorization:ue()}),je.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,headers:e})},Oe=function(e){return(e=Object(B.a)(Object(B.a)({},e),{},{baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL})).headers=Object(B.a)(Object(B.a)({},e.headers),{},{Authorization:ue()}),je()(e)},he=function(e,t,n,a){n(!1),a(!1),t(!0);try{be({"Content-type":"application/json"}).get(e).then((function(e){t(!1),a({data:e.data})})).catch((function(e){t(!1),"undefined"!=typeof e.response?n(e.response.data.detail):n(e.message)}))}catch(i){n(i.message)}},me=function(e,t,n,a){n(!1),a(!1),t(!0);try{be({"Content-type":"application/json"}).delete(e).then((function(e){t(!1),a({data:e.data})})).catch((function(e){t(!1),"undefined"!=typeof e.response?n(e.response.data.detail):n(e.message)}))}catch(i){n(i.message)}},pe=function(e,t,n,a){var i=e.url,c=e.header,s=e.method,r=e.data;"undefined"==typeof c&&(c={"Content-Type":"application/json"}),"undefined"==typeof s&&(s="get");try{Oe({url:i,method:s,header:c,data:r}).then((function(e){t(!1),n(!1),a({data:e.data,error:!1})})).catch((function(e){t(!1),a(!1),e.response?("object"===typeof e.response.data.detail&&null!==e.response.data.detail&&n(e.response.data.detail),e.request&&401===e.request.status&&ie()):n([{msg:e.message,type:"Exception"}])}))}catch(o){a(!1),t(!1),n([{msg:o.message,type:"Exception"}])}};n(448);function fe(e){var t=e.list,n=e.detail;return Object(a.jsxs)("div",{className:"ListDetailView",children:[Object(a.jsx)("div",{className:"ListDetailViewLeftColumn",children:t()}),Object(a.jsx)("div",{className:"ListDetailViewRightColumn",children:n()})]})}var xe=n(958),ve=n(927);function ge(e){var t=e.onEnterPressed,n=e.onChange,i=e.label,s=e.initValue,r=e.error,o=e.variant,l=Object(ve.a)((function(){return{root:{width:"100%"}}}))(),d=c.a.useState(s),j=Object(z.a)(d,2),u=j[0],b=j[1];return Object(a.jsx)("div",{className:l.root,children:Object(a.jsx)(xe.a,{id:"search-input",label:i,value:u,onChange:function(e){"undefined"!=typeof n&&(n(e),e.preventDefault()),b(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&"undefined"!=typeof t&&(t(e.target.value),e.preventDefault())},className:l.root,error:r,variant:o,size:"small"})})}n(450),n(451);var ye=n(330);function Se(e){var t=e.errorList,n="undefined"===typeof e.fillWidth?"ErrorBox NotFullErrorBox":"ErrorBox",i=function(e){return e.map((function(e,t){var n=e.msg,i=e.loc,c=e.type;return Object(a.jsxs)("li",{title:i,children:[n," [",c,"]"]},t)}))};return function(e){if(e)return Object(a.jsxs)("div",{className:n,children:[Object(a.jsx)(ye.FiAlertTriangle,{size:50}),Object(a.jsxs)("section",{className:"ErrorDetails",children:[Object(a.jsx)("div",{className:"Header",children:"The following errors occurred:"}),Object(a.jsx)("ul",{className:"ErrorList",children:e&&i(e)})]})]})}(t)}var Ce=n(930);n(452);function Ne(){return Object(a.jsx)("div",{className:"CenteredCircularProgress",children:Object(a.jsx)(Ce.a,{color:"secondary"})})}var ke=function(e){var t=e.filterLabel,n=e.filterKey,s=e.endPoinyUrl,r=e.renderList,o=e.forceReload,l=localStorage.getItem(n),d=c.a.useState(!1),j=Object(z.a)(d,2),u=j[0],b=j[1],O=c.a.useState(!1),h=Object(z.a)(O,2),m=h[0],p=h[1],f=c.a.useState(!1),x=Object(z.a)(f,2),v=x[0],g=x[1],y=c.a.useState(l||""),S=Object(z.a)(y,2),C=S[0],N=S[1],k=c.a.useState(!1),T=Object(z.a)(k,2),R=T[0],w=T[1],D=c.a.useState(0),L=Object(z.a)(D,2),E=L[0],A=L[1],F=function(e){return function(){var t=function(){};e&&(t=function(e){b(e),w(!1)}),pe({url:s,method:"post",header:{"Content-type":"text/plain"},data:C},t,(function(e){p(e),w(!0)}),(function(e){g(e),w(!1)}),e)}};return Object(i.useEffect)((function(){F(!0)();var e=setInterval(F(!1),5e3);return function(){return clearInterval(e)}}),[C,E,o]),Object(a.jsxs)("div",{className:"FilterListWrapper",children:[Object(a.jsx)("div",{className:"FilterInput",children:Object(a.jsx)(ge,{label:t,onEnterPressed:function(e){localStorage.setItem(n,e),N(e),A(Math.random())},initValue:C,style:{width:"100%"},error:R,variant:"outlined"})}),Object(a.jsx)("div",{className:"FilterList",children:!1!==m?Object(a.jsx)(Se,{errorList:m}):!1!==v?r(v.data):u?Object(a.jsx)(Ne,{}):void 0})]})};n(113),n(157);function Te(e){var t=e.data,n=e.onClick;return Object(a.jsxs)("div",{onClick:function(e){n(t.itemId)},className:"Card",children:[Object(a.jsx)("span",{className:"Avatar ScopeAvatar",children:"S"}),Object(a.jsx)("span",{className:"name",children:t.name}),Object(a.jsx)("span",{className:"scope",children:t.hostname})]})}n(278),n(453),n(454);function Re(e){var t=e.children,n=e.style;return Object(a.jsx)("div",{className:"DetailBox",style:n,children:t})}var we={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#000",maxHeight:"200px",fontSize:"80%"},"hljs-comment":{color:"#408080",fontStyle:"italic"},"hljs-quote":{color:"#408080",fontStyle:"italic"},"hljs-keyword":{color:"#954121"},"hljs-selector-tag":{color:"#954121"},"hljs-literal":{color:"#954121"},"hljs-subst":{color:"#954121"},"hljs-number":{color:"#40a070"},"hljs-string":{color:"#219161"},"hljs-doctag":{color:"#219161"},"hljs-selector-id":{color:"#19469d"},"hljs-selector-class":{color:"#19469d"},"hljs-section":{color:"#19469d"},"hljs-type":{color:"#19469d"},"hljs-params":{color:"#00f"},"hljs-title":{color:"#458",fontWeight:"bold"},"hljs-tag":{color:"#000080",fontWeight:"normal"},"hljs-name":{color:"#000080",fontWeight:"normal"},"hljs-attribute":{color:"#000080",fontWeight:"normal"},"hljs-variable":{color:"#008080"},"hljs-template-variable":{color:"#008080"},"hljs-regexp":{color:"#b68"},"hljs-link":{color:"#b68"},"hljs-symbol":{color:"#990073"},"hljs-bullet":{color:"#990073"},"hljs-built_in":{color:"#0086b3"},"hljs-builtin-name":{color:"#0086b3"},"hljs-meta":{color:"#999",fontWeight:"bold"},"hljs-deletion":{background:"#fdd"},"hljs-addition":{background:"#dfd"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};n(455);function De(e){var t=Object.assign({},e);return Object(a.jsx)("div",{className:"MiniHeader",children:t.children})}var Le=n(961);function Ee(e){var t='<script type="text/javascript">\n    var unomiOption = {\n        scope: \''+e.scope+"',\n        url: '"+e.trackerHost+'\'\n    };\n    window.unomiTracker || (window.unomiTracker = {}), function () {\n        function e(e) {\n            for (unomiTracker.initialize({"Apache Unomi": unomiOption}); n.length > 0;) {\n                var r = n.shift(), t = r.shift();\n                unomiTracker[t] && unomiTracker[t].apply(unomiTracker, r)\n            }\n        }\n\n        for (var n = [], r = ["trackSubmit", "trackClick", "trackLink", "trackForm", "initialize", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on", "personalize"], t = 0; t < r.length; t++) {\n            var i = r[t];\n            window.unomiTracker[i] = function (e) {\n                return function () {\n                    var r = Array.prototype.slice.call(arguments);\n                    return r.unshift(e), n.push(r), window.unomiTracker\n                }\n            }(i)\n        }\n        unomiTracker.load = function () {\n            var n = document.createElement("script");\n            n.type = "text/javascript", n.async = !0, n.src = unomiOption.url + "/tracker/unomi-tracker.min.js", n.addEventListener ? n.addEventListener("load", function (n) {\n                "function" == typeof e && e(n)\n            }, !1) : n.onreadystatechange = function () {\n                "complete" !== this.readyState && "loaded" !== this.readyState || e(window.event)\n            };\n            var r = document.getElementsByTagName("script")[0];\n            r.parentNode.insertBefore(n, r)\n        }, document.addEventListener("DOMContentLoaded", unomiTracker.load), unomiTracker.page()\n    }();\n<\/script>';return Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Please paste this code into your web page"}),Object(a.jsx)(Le.a,{language:"javascript",wrapLongLines:!0,style:we,children:t})]})}var Ae={BASE_FONT_FAMILY:"Roboto Mono, sans-serif",BASE_FONT_SIZE:"15px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"transparent",BASE_COLOR:"#bbb",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"#444",OBJECT_VALUE_NULL_COLOR:"#64b5f6",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"green",OBJECT_VALUE_STRING_COLOR:"#0069c0",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"#0a0",OBJECT_VALUE_BOOLEAN_COLOR:"#a00",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"#aaa",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:8,ARROW_FONT_SIZE:10,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Roboto Mono, sans-serif",TREENODE_FONT_SIZE:"13px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:10,TABLE_BORDER_COLOR:"#888",TABLE_TH_BACKGROUND_COLOR:"white",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#0089e0",TABLE_DATA_BACKGROUND_IMAGE:" linear-gradient(to bottom, white, white 50%, rgb(234, 243, 243) 50%, rgb(234, 243, 243))",TABLE_DATA_BACKGROUND_SIZE:"100px 32px"},Fe=n(54),Ie=(n(676),n(677),function(e){var t=e.label;return Object(a.jsx)("div",{className:"DetailHeader",children:Object(a.jsx)("div",{className:"DetailLabel",children:t})})}),_e=n(936),qe=(n(132),n(184)),Pe=n.n(qe),ze=(n(678),function(e){var t=e.label,n=e.value;return Object(a.jsxs)("div",{className:"DetailKeyValue",children:[Object(a.jsx)("div",{title:t,className:"DetailKey",children:t}),Object(a.jsx)("div",{title:n,className:"DetailValue",children:n})]})});function Be(e){var t=e.properties,n=e.show;var i=function(e){return"undefined"===typeof e?"undefined":null===e?"null":(t=e)&&0===Object.keys(t).length&&t.constructor===Object?"{}":Array.isArray(e)&&0===e.length?"[]":e.toString();var t},s="undefined"!==typeof t&&null!==t?Pe.a.dot(t):{};return Object(a.jsx)(c.a.Fragment,{children:Object.entries(s).map((function(e){var t=Object(z.a)(e,2),c=t[0],s=t[1];return n?n.includes(c)?Object(a.jsx)(ze,{label:c,value:i(s)},c):"":Object(a.jsx)(ze,{label:c,value:i(s)},c)}))})}var Me=n(931),He=n(935),We=n(933),Ue=n(934),Ve=n(932);function Je(e){var t=e.open,n=e.title,i=e.content,c=e.onAgree,s=e.onClose;return Object(a.jsxs)(Me.a,{open:t,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(Ve.a,{id:"alert-dialog-title",children:n}),Object(a.jsx)(We.a,{children:Object(a.jsx)(Ue.a,{id:"alert-dialog-description",children:i})}),Object(a.jsxs)(He.a,{children:[Object(a.jsx)(_e.a,{onClick:s,color:"primary",children:"No"}),Object(a.jsx)(_e.a,{onClick:c,color:"primary",autoFocus:!0,children:"Yes"})]})]})}function Ke(e){var t=e.data,n=e.onDelete,i=c.a.useState(!1),s=Object(z.a)(i,2),r=s[0],o=s[1];return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ie,{label:t.name}),Object(a.jsxs)("div",{className:"RightTabScroller",style:{height:"calc(100% - 195px)"},children:[Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Data"}),Object(a.jsx)(Be,{properties:t})]}),Object(a.jsx)(Ee,{scope:t.name,trackerHost:t.hostname}),Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"GET /scope"}),Object(a.jsx)(Fe.a,{data:t,theme:Ae,expandLevel:3})]})]}),Object(a.jsxs)("div",{className:"DetailActionButtons",children:[Object(a.jsx)(_e.a,{onClick:function(){o(!0)},variant:"outlined",color:"primary",children:"Delete"}),Object(a.jsx)(Je,{open:r,title:"Do you want to delete this source?",content:"This action can not be undone.",onClose:function(){o(!1)},onAgree:function(){o(!1),n(t.itemId)}})]})]})}n(679);function Qe(e){var t=e.children,n=e.buttons;return Object(a.jsxs)("nav",{className:"TopInfoBar",children:[Object(a.jsx)("div",{className:"Path",children:t}),Object(a.jsx)("div",{className:"ActionButtons",children:function(){if(Array.isArray(n))return n.map((function(e,t){return Object(a.jsx)("span",{children:e},t)}))}()})]})}n(680);function Ge(){var e=Object(H.h)();return Object(a.jsx)("div",{className:"Breadcrumps",children:function(){var t="";return e.pathname.split("/").map((function(e){return""!==e?(t=t+"/"+e,Object(a.jsxs)("span",{children:[" > ",e]},e)):Object(a.jsx)("span",{children:"Home"},e)}))}()})}n(681);var Ye=n(937);var Xe=function(e){var t=e.children,n=e.onClose;return Object(a.jsxs)("div",{className:"RightPaperHeader",children:[Object(a.jsx)("span",{className:"Label",children:t}),Object(a.jsx)(Ye.a,{onClick:n,style:{cursor:"pointer"}})]})},Ze=n(970),$e=n(928),et=n(938),tt=n(962),nt=n(966),at=n(965);n(682);function it(){var e=Object(i.useState)(!1),t=Object(z.a)(e,2),n=t[0],s=t[1],r=Object(i.useState)(""),o=Object(z.a)(r,2),l=o[0],d=o[1],j=Object(i.useState)(""),u=Object(z.a)(j,2),b=u[0],O=u[1],h=Object(i.useState)("http://localhost:8181"),m=Object(z.a)(h,2),p=m[0],f=m[1],x=function(e){O(e.target.value)},v=function(e){d(e.target.value)},g=function(e){f(e.target.value)},y=function(){Oe({url:"/source",method:"post",data:{name:l,hostname:p,scope:l}}).then((function(e){s(!0),w()})).catch((function(e){s(!1)}))},S=function(){return n?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(se.a,{variant:"h6",children:"Source created"}),Object(a.jsx)("div",{className:"ScopeDesc",style:{marginTop:20},children:"Please find tracker javascript code in source tab and then copy and paste it in your head tag of your web page."})]}):""};var C=c.a.useState(0),N=Object(z.a)(C,2),k=N[0],T=N[1],R=["Scope and name","Type context server api host","Confirmation"],w=function(){T((function(e){return e+1}))},D=function(){T((function(e){return e-1}))},L=function(){if(k<R.length-2)return Object(a.jsxs)(c.a.Fragment,{children:[0!==k&&Object(a.jsx)(_e.a,{disabled:0===k,onClick:D,className:"Button",children:"Back"}),Object(a.jsx)(_e.a,{variant:"contained",color:"primary",onClick:w,className:"Button",children:"Next"})]})},E=function(e){switch(e){case 0:return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{className:"ScopeDesc",children:"Type source scope and name. Scope is usually a namespace for all your events and it is associated with your file or business activity."}),Object(a.jsxs)("div",{style:{marginBottom:20},children:[Object(a.jsx)(xe.a,{variant:"outlined",size:"small",onChange:v,value:l,label:"Scope",style:{marginRight:5}}),Object(a.jsx)(xe.a,{variant:"outlined",size:"small",onChange:x,value:b,label:"Name"})]})]});case 1:return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{className:"ScopeDesc",children:"Tracker API URL is a host name and port where the context server api is located. Usually it is http://localhost:8181 or for dockerized platforms http://context-server:8181."}),Object(a.jsx)("div",{style:{marginBottom:20,width:"80%"},children:Object(a.jsx)(xe.a,{variant:"outlined",size:"small",onChange:g,label:"Tracker API",value:p})}),Object(a.jsx)("div",{children:Object(a.jsx)(_e.a,{onClick:y,variant:"contained",color:"primary",children:"Submit"})})]});case 2:return Object(a.jsx)(S,{});default:return"Unknown step"}};return Object(a.jsx)(at.a,{activeStep:k,orientation:"vertical",children:R.map((function(e,t){return Object(a.jsxs)(et.a,{onClickCapture:function(){T(t)},children:[Object(a.jsx)(tt.a,{children:e}),Object(a.jsxs)(nt.a,{children:[Object(a.jsx)($e.a,{children:E(t)}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:L()})})]})]},e)}))})}function ct(e){var t=e.width,n=e.label,i=e.open,c=e.onClose,s=function(e){c(e)};return Object(a.jsx)(Ze.a,{anchor:"right",open:i,onClose:s,children:Object(a.jsxs)("div",{style:{width:t||1200,overflowX:"hidden"},children:[Object(a.jsx)(Xe,{onClose:s,children:Object(a.jsx)("span",{style:{fontWeight:600},children:n})}),i&&Object(a.jsx)(it,{})]})})}var st=n(91);n(683);function rt(e){var t=e.label,n=e.onClick,i=e.className,c=e.style,s=e.icon,r=e.disabled,o=i||"Button";o+="undefined"===typeof r||!0!==r?" EnabledButton":" DisabledButton";var l=s||"";return Object(a.jsxs)("nav",{onClickCapture:function(e){e.preventDefault(),"undefined"===typeof n||"undefined"!==typeof r&&!0===r||n(e)},className:o,style:c,children:[l,t]})}var ot=Object(P.b)((function(e){return{}}),{showAlert:k})((function(e){var t=e.showAlert,n=c.a.useState(!1),i=Object(z.a)(n,2),s=i[0],r=i[1],o=c.a.useState(!1),l=Object(z.a)(o,2),d=l[0],j=l[1],u=c.a.useState(!1),b=Object(z.a)(u,2),O=b[0],h=b[1],m=c.a.useState(!1),p=Object(z.a)(m,2),f=p[0],x=p[1],v=function(e){he("/source/"+e,j,h,x)},g=function(e){x(!1)},y=function(e){me("/source/"+e,(function(){}),(function(){}),g)};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Qe,{buttons:[Object(a.jsx)(rt,{label:"Add source",onClick:function(){r(!0)},icon:Object(a.jsx)(st.CgPlayListAdd,{size:24,style:{marginRight:5}})})],children:Object(a.jsx)(Ge,{})}),Object(a.jsx)(fe,{list:function(){return Object(a.jsx)(ke,{endPoinyUrl:"/source/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(Te,{data:e,onClick:v},t)}))},filterLabel:"Type scope name to filter",filterKey:"filterScopeQuery"})},detail:function(){return!0===d?Object(a.jsx)(Ne,{}):!1!==f?Object(a.jsx)(Ke,{data:f.data,onDelete:y}):!1!==O?(t({message:O[0].msg,type:"error",hideAfter:2e3}),""):void 0}}),Object(a.jsx)(ct,{width:1e3,label:"Create Source",open:s,onClose:function(){return r(!1)}})]})}));n(684);function lt(e){var t=e.data,n=e.onClick;return Object(a.jsxs)("div",{onClick:function(e){n(t.eventId)},className:"Card",children:[Object(a.jsx)("span",{className:"Avatar EventAvatar",children:"E"}),Object(a.jsx)("span",{className:"scope",children:t.scope}),Object(a.jsx)("span",{className:"type",children:t.type}),Object(a.jsx)("span",{className:"timestamp",children:t.timestamp})]})}n(159);function dt(e){var t=e.data;function n(e){var t=e.data,n={"Event Id":t.itemId,"Session id":t.sessionId,"Profile id":t.profileId};return Object(a.jsx)(Be,{properties:n})}function i(e){var t=e.data,n={"Event Type":t.eventType,Scope:t.scope,Persistent:t.persistent,Version:t.version,Timestamp:t.timeStamp};return Object(a.jsx)(Be,{properties:n})}return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(Ie,{label:t.itemId}),Object(a.jsxs)("div",{className:"RightTabScroller",children:[Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Ids"}),Object(a.jsx)(n,{data:t})]}),Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Properties"}),Object(a.jsx)(Be,{properties:t.properties})]}),Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Source"}),Object(a.jsx)(Be,{properties:t.source})]}),Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Target"}),Object(a.jsx)(Be,{properties:t.target})]}),Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Other"}),Object(a.jsx)(i,{data:t})]}),Object(a.jsxs)(Re,{children:[Object(a.jsx)(De,{children:"Raw UNOMI data"}),Object(a.jsx)(Fe.a,{data:t,theme:Ae,expandLevel:3})]})]})]})}var jt=Object(P.b)((function(e){return{notification:e.notificationReducer}}),{showAlert:k})((function(e){var t=e.showAlert,n=c.a.useState(!1),i=Object(z.a)(n,2),s=i[0],r=i[1],o=c.a.useState(!1),l=Object(z.a)(o,2),d=l[0],j=l[1],u=c.a.useState(!1),b=Object(z.a)(u,2),O=b[0],h=b[1],m=function(e){console.log(e),he("/event/"+e,r,j,h)};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Qe,{children:Object(a.jsx)(Ge,{})}),Object(a.jsx)(fe,{list:function(){return Object(a.jsx)(ke,{endPoinyUrl:"/event/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(lt,{data:e,onClick:m},t)}))},filterLabel:"Type condition to filter events",filterKey:"filterEventQuery"})},detail:function(){return!1!==O?Object(a.jsx)(dt,{data:O.data}):!0===s?Object(a.jsx)(Ne,{}):!1!==d?(t({message:d[0].msg,type:"error",hideAfter:2e3}),""):void 0}})]})})),ut=(n(685),n(186)),bt=n(187),Ot=n(188),ht=n(185),mt=n(189),pt=n(190),ft=n(191);function xt(e){var t=e.data,n=e.onClick;return Object(a.jsxs)("div",{onClick:function(e){n(t.metadata.id)},className:"Card RuleCard",children:[Object(a.jsx)("span",{className:"enabled",children:t.metadata.enabled?Object(a.jsx)(ht.VscVmRunning,{size:24,style:{color:"darkgreen"}}):Object(a.jsx)(ut.VscVmOutline,{size:24,style:{color:"darkred"}})}),Object(a.jsx)("span",{className:"hidden",children:t.metadata.hidden?Object(a.jsx)(bt.VscEyeClosed,{size:24}):Object(a.jsx)(Ot.VscEye,{size:24})}),Object(a.jsx)("span",{className:"readonly",children:t.metadata.readOnly?Object(a.jsx)(mt.VscGistSecret,{size:24}):Object(a.jsx)(pt.VscFile,{size:24})}),Object(a.jsx)("span",{className:"missing",children:t.metadata.missingPlugins?Object(a.jsx)(ft.VscExclude,{size:24,style:{color:"darkred"}}):""}),Object(a.jsx)("span",{className:"scope",children:t.metadata.scope}),Object(a.jsx)("span",{className:"name",children:t.metadata.name})]})}var vt=n(940),gt=n(939),yt=n(239),St=n.n(yt);function Ct(e){var t=e.index,n=e.id,i=e.meta,s=c.a.useState(i.enabled),r=Object(z.a)(s,2),o=r[0],l=r[1],d=c.a.useState(i.hidden),j=Object(z.a)(d,2),u=j[0],b=j[1],O=c.a.useState(i.readOnly),h=Object(z.a)(O,2),m=h[0],p=h[1],f=c.a.useState(i.missingPlugins),x=Object(z.a)(f,2),v=x[0],g=x[1],y=St()({typography:{body1:{fontSize:14}},palette:{primary:{main:"#19857b"}}}),S=function(){},C=function(){},N=function(e,a,i){var c=e.target.checked,s={url:"/"+t+"/"+n,method:"put",data:{doc:{metadata:{}}}};s.data.doc.metadata[a]=c,pe(s,S,C,(function(){i(c)}))},k=function(e){var t=e.label,n=e.value,i=e.onChange;return Object(a.jsxs)("div",{className:"RuleSwitch",children:[Object(a.jsx)("div",{className:"RuleSwitchLabel",children:t}),Object(a.jsx)(gt.a,{checked:n,onChange:i,color:"primary",size:"small"})]})};return Object(a.jsxs)(vt.a,{theme:y,children:[Object(a.jsx)(k,{label:"Enabled",value:o,onChange:function(e){N(e,"enabled",l)}}),Object(a.jsx)(k,{label:"Read only",value:m,onChange:function(e){N(e,"readOnly",p)}}),Object(a.jsx)(k,{label:"Hidden",value:u,onChange:function(e){N(e,"hidden",b)}}),Object(a.jsx)(k,{label:"Missing plugins",value:v,onChange:function(e){N(e,"missingPlugins",g)}})]})}n(704),n(705);function Nt(e){var t=e.data,n=e.filter,i=e.unfold;var c=function(e){return null===e?"null":(t=e)&&0===Object.keys(t).length&&t.constructor===Object?"{}":Array.isArray(e)&&0===e.length?"[]":e.toString();var t},s=function(e,t,n){var s=i?"block":"inline-block";return Object(a.jsxs)("span",{className:"JsonItem",style:{display:s},children:[Object(a.jsxs)("span",{className:"JsonKey",children:[t,":"]})," ",Object(a.jsx)("span",{className:"JsonValue",children:c(n)}),","]},e)};return Object(a.jsx)("div",{className:"JsonStringify",children:function(e,t){return Object.entries(function(e){return"undefined"!==typeof e&&null!==e?Pe.a.dot(e):{}}(e)).map((function(e,n){var a=Object(z.a)(e,2),i=a[0],c=a[1];return"undefined"!==typeof t&&Array.isArray(t)?0===t.filter((function(e){return i.startsWith(e)})).length?s(n,i,c):"":s(n,i,c)}))}(t,n)})}var kt=n(336),Tt=n(335),Rt=n(334);function wt(e){var t=e.row,n=e.timeField,c=e.onClick,s=e.filterFields,r=e.displayDetailButton,o=e.timeFieldWidth,l=Object(i.useState)(!1),d=Object(z.a)(l,2),j=d[0],u=d[1],b="undefined"!==typeof o?o>0&&{minWidth:o,maxWidth:o}:{};return Object(a.jsx)("div",{className:"EventRow",children:Object(a.jsxs)("div",{className:"Header",children:[Object(a.jsx)("div",{className:"Toggle",onClick:function(){u(!j)},children:Object(a.jsx)("span",{style:{border:"solid 1px gray"},children:j?Object(a.jsx)(Rt.BsArrowsCollapse,{size:30}):Object(a.jsx)(Tt.BsArrowsExpand,{size:30})})}),b&&Object(a.jsxs)("div",{className:"Timestamp",style:b,children:[Object(a.jsx)("div",{style:{width:"100%"},children:n(t).map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))}),r&&Object(a.jsx)(rt,{label:"Details",icon:Object(a.jsx)(kt.TiBusinessCard,{size:20,style:{marginRight:5}}),style:{margin:5,padding:"5px 10px"},onClick:function(){c(t.itemId)}})]}),Object(a.jsx)("div",{className:"Data",children:Object(a.jsx)(Nt,{data:t,filter:j?[]:s,unfold:j})})]})})}var Dt=function(e){var t=e.data,n=e.loading,i=e.errors,c=e.timeField,s=e.timeFieldLabel,r=e.timeFieldWidth,o=e.filterFields,l=e.onLoadDetails,d=e.onDetails,j="undefined"!==typeof r?r>0&&{minWidth:r,maxWidth:r}:{},u=function(e,t){return Object(a.jsxs)("div",{className:"Header",children:[j&&Object(a.jsx)("div",{className:"Timestamp",children:e}),Object(a.jsxs)("div",{className:"Data",children:["Data - Total ",t.total," records"]})]})},b=function(e,t,n,i,c){if(Array.isArray(n.data))return n.data.map((function(n,s){return Object(a.jsx)(wt,{row:n,timeField:e,timeFieldWidth:r,filterFields:t,onClick:c,displayDetailButton:"undefined"!==typeof i},s)}))};return function(e,t,n,i,c,s,r){return!1!==n?Object(a.jsx)(Se,{errorList:n}):!0===t?Object(a.jsx)(Ne,{}):e?Object(a.jsxs)("div",{className:"ObjectList",children:[u(c,e),b(i,s,e,r,d)]}):""}(t,n,i,c,s,o,l)},Lt=n(193),Et=n.n(Lt),At=(n(706),n(3)),Ft=n.n(At);function It(e){var t=e.children,n=e.tabId;return c.a.Children.map(t,(function(e){return n===e.props.id?e:""}))}function _t(e){var t=e.children;e.id;return t}function qt(e){var t=e.tabs,n=e.children,c=e.defaultTab,s=e.onTabSelect,r=Object(i.useState)(c||0),o=Object(z.a)(r,2),l=o[0],d=o[1];function j(e){var t=e.label,n=e.index,i=e.selected;return Object(a.jsx)("span",{className:i?"Tab Selected":"Tab",onClick:function(){return d(e=n),void(s&&s(e));var e},children:t})}return Object(a.jsxs)("nav",{className:"Tabs",children:[Object(a.jsx)("nav",{className:"Navigation",children:t.map((function(e,t){return l===t?Object(a.jsx)(j,{label:e,index:t,selected:!0},t):Object(a.jsx)(j,{label:e,index:t,selected:!1},t)}))}),Object(a.jsx)("div",{className:"TabContent",children:Object(a.jsx)(It,{tabId:l,children:n})})]})}It.propTypes={tabId:Ft.a.number.isRequired},_t.propTypes={id:Ft.a.number.isRequired};n(707);function Pt(e){var t=e.children,n=e.style;return Object(a.jsx)("div",{className:"BluredBox",style:n,children:t})}function zt(e){var t=e.id,n=Object(i.useState)(!1),s=Object(z.a)(n,2),r=s[0],o=s[1];return Object(i.useEffect)((function(){pe({url:"/rule/stats/"+t,method:"get"},(function(){}),(function(){}),(function(e){o(e.data)}))}),[]),Object(a.jsx)(c.a.Fragment,{children:r&&Object(a.jsx)("div",{children:Object(a.jsx)(Be,{properties:r})})})}var Bt=n(967),Mt=n(67),Ht=n(337),Wt=function(e){var t=e.name,n=e.onDelete;return""===t?Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Mt.VscError,{size:24,color:"#d81b60"}),label:"Missing name",style:{color:"#d81b60",border:"solid #d81b60 2px",backgroundColor:"inherit"}}):Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Ht.VscServerProcess,{size:24,color:"#0069c0"}),label:t,style:{color:"#0069c0",border:"solid #0069c0 2px",backgroundColor:"inherit"},onDelete:n})},Ut=n(338),Vt=function(e){var t=e.scope,n=e.onDelete;return""===t?Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Mt.VscError,{size:24,color:"#d81b60"}),label:"Missing scope",style:{color:"#d81b60",border:"solid #d81b60 2px",backgroundColor:"inherit"}}):Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Ut.IoCodeWorkingOutline,{size:24,color:"#0069c0"}),label:t,style:{color:"#0069c0",border:"solid #0069c0 2px",backgroundColor:"inherit"},onDelete:n})},Jt=n(339);var Kt=function(e){var t=e.tags,n=e.onDelete;return function(){if("undefined"===typeof t||0===t.length)return Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Mt.VscError,{size:24,color:"#d81b60"}),label:"No tags yet",style:{color:"#d81b60",border:"solid #d81b60 2px",backgroundColor:"inherit"}});var e={icon:Object(a.jsx)(Jt.CgHashtag,{size:24,color:"#0069c0"}),style:{color:"#0069c0",border:"solid #0069c0 2px",backgroundColor:"inherit"}};return t.map((function(t,i){var c;return n&&(e=Object(B.a)(Object(B.a)({},e),{},{onDelete:(c=i,function(){n(c)})})),Object(a.jsx)(Bt.a,Object(B.a)({label:t},e),i)}))}()},Qt=n(92),Gt=function(e){var t=e.condition,n=e.onDelete;return""===t?Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Mt.VscError,{size:24,color:"#d81b60"}),label:"No condition set yet",style:{color:"#d81b60",border:"solid #d81b60 2px",backgroundColor:"inherit"}}):Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Qt.BsCheckCircle,{size:24,color:"#0069c0"}),label:t,style:{color:"#0069c0",border:"solid #0069c0 2px",backgroundColor:"inherit"},onDelete:n})},Yt=n(340);var Xt=function(e){var t=e.actions,n=e.onDelete;return function(){if(Array.isArray(t)){if(0===t.length)return Object(a.jsx)(Bt.a,{icon:Object(a.jsx)(Mt.VscError,{size:24,color:"#d81b60"}),label:"No actions yet",style:{color:"#d81b60",border:"solid #d81b60 2px",backgroundColor:"inherit"}});var e={icon:Object(a.jsx)(Yt.AiOutlinePlayCircle,{size:24,color:"#0069c0"}),style:{color:"#0069c0",border:"solid #0069c0 2px",backgroundColor:"inherit"}};return t.map((function(t,i){var c;return n&&(e=Object(B.a)(Object(B.a)({},e),{},{onDelete:(c=i,function(){n(c)})})),Object(a.jsx)(Bt.a,Object(B.a)({label:t},e),i)}))}return Object(a.jsx)(Se,{errorList:[{msg:"Artions is not array",type:"Exception"}]})}()},Zt=(n(708),function(e){var t=e.data,n=e.type,i=function(){return Object(a.jsxs)(c.a.Fragment,{children:[n,"  ",Object(a.jsx)(Wt,{name:t.uql.name})]})},s=function(){return Object(a.jsxs)(c.a.Fragment,{children:["In scope ",Object(a.jsx)(Vt,{scope:t.uql.scope})]})},r=function(){return Object(a.jsxs)(c.a.Fragment,{children:["With tags ",Object(a.jsx)(Kt,{tags:t.uql.tags})]})},o=function(){return Object(a.jsxs)(c.a.Fragment,{children:["Runs when ",Object(a.jsx)(Gt,{condition:t.uql.condition})]})},l=function(){return Object(a.jsxs)(c.a.Fragment,{children:["Then executes ",Object(a.jsx)(Xt,{actions:t.uql.actions})]})},d=function(){return"undefined"!==typeof t.uql?Object(a.jsxs)("div",{className:"UqlChips",children:[Object(a.jsx)(i,{})," ",Object(a.jsx)(s,{})," ",t.uql.tags&&Object(a.jsx)(r,{})," ",Object(a.jsx)(o,{})," ",t.uql.actions&&Object(a.jsx)(l,{})]}):""};return Object(a.jsx)(d,{})});function $t(e){var t=e.data,n=Object(i.useState)(!0),c=Object(z.a)(n,2),s=c[0],r=c[1],o=Object(i.useState)(!1),l=Object(z.a)(o,2),d=l[0],j=l[1],u=Object(i.useState)(!1),b=Object(z.a)(u,2),O=b[0],h=b[1];Object(i.useEffect)((function(){var e;if(t.uql&&(null===(e=t.uql)||void 0===e?void 0:e.metadata)){var n='timeStamp>DATE("'+Et.a.unix(t.uql.metadata.timestamp).toISOString()+'") AND scope="'+t.uql.scope+'" AND '+t.uql.condition;r(!0),pe({url:"/event/select?simplified=0&limit=5",method:"post",header:{"Content-type":"text/plain"},data:n},r,h,(function(e){j(e)}))}}),[t]);return Object(a.jsx)(Dt,{data:d.data,loading:s,errors:O,timeFieldLabel:"timestamp",timeFieldWidth:0,filterFields:["itemId","itemType","scope","profile","timeStamp","size","lastEventDate"],timeField:function(e){return[e.scope]}})}var en=function(e){var t=e.data,n=e.onDelete,i=e.onEdit,s=e.onDuplicate,r=c.a.useState(!1),o=Object(z.a)(r,2),l=o[0],d=o[1],j=!!window.chrome?{zIndex:5,backgroundColor:"rgba(255,255,255,.3)",marginBottom:0}:{zIndex:5,marginBottom:0},u=function(e){var t,n=e.data;return n.uql&&(null===(t=n.uql)||void 0===t?void 0:t.metadata)?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{style:{margin:5},children:"Example events that trigger this rule"}),Object(a.jsx)($t,{data:n})]}):Object(a.jsx)("div",{style:{margin:5},children:"This rule was not created in TRACARDI. Therefore there is no information on events triggering this rule."})};return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(Ie,{label:t.unomi.metadata.name}),Object(a.jsxs)("div",{className:"RightTabScroller",style:{height:"calc(100% - 122px)",overflowY:"scroll"},children:[Object(a.jsx)(Pt,{style:{position:"sticky",top:8},children:Object(a.jsxs)(Re,{style:j,children:[t.uql&&Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(De,{children:"Rule"}),Object(a.jsx)(Zt,{data:t,type:"Rule"})]}),t.unomi.metadata.description&&Object(a.jsxs)("div",{children:[Object(a.jsx)(De,{children:"description"}),t.unomi.metadata.description]}),Object(a.jsxs)("div",{className:"DetailActionButtons",children:[Object(a.jsx)(rt,{onClick:function(){t.uql&&i(t.uql)},label:"Edit",disabled:"undefined"===typeof t.uql}),Object(a.jsx)(rt,{onClick:function(){t.uql&&s(t.uql)},label:"Duplicate",disabled:"undefined"===typeof t.uql}),Object(a.jsx)(rt,{onClick:function(){t.uql&&d(!0)},label:"Delete",disabled:"undefined"===typeof t.uql}),Object(a.jsx)(Je,{open:l,title:"Do you want to delete this rule?",content:"This action can not be undone.",onClose:function(){d(!1)},onAgree:function(){d(!1),t.uql&&n(t.unomi.metadata.id)}})]})]})}),Object(a.jsx)("div",{style:{margin:"10px"},children:Object(a.jsxs)(qt,{tabs:["Triggered by","Raw","Stats","Settings"],children:[Object(a.jsx)(_t,{id:0,children:Object(a.jsx)("div",{style:{margin:"0 10px"},children:Object(a.jsx)(u,{data:t})})}),Object(a.jsx)(_t,{id:1,children:Object(a.jsx)("div",{style:{margin:"20px"},className:"MoveUpOpacity",children:Object(a.jsx)(Fe.a,{data:t,theme:Ae,expandLevel:2})})}),Object(a.jsx)(_t,{id:2,children:Object(a.jsx)("div",{style:{margin:"20px"},className:"MoveUpOpacity",children:Object(a.jsx)(zt,{id:t.unomi.itemId})})}),Object(a.jsx)(_t,{id:3,children:Object(a.jsx)("div",{style:{margin:"20px"},className:"MoveUpOpacity",children:Object(a.jsx)(Ct,{index:"rule",id:t.unomi.itemId,meta:t.unomi.metadata})})})]})})]})]})},tn=(n(284),n(167),n(709),n(710),n(711),n(346)),nn=(n(712),n(246));function an(e){var t=e.template,n=e.params,s=e.onChange,r=e.errors,o=e.initInputValues,l=/\${(.*?)}/g,d=t.match(l),j=t.split(l),u="undefined"!==typeof r?r:{},b="undefined"!==typeof o?o:{},O=Object(i.useState)(b),h=Object(z.a)(O,2),m=h[0],p=h[1];if(!d)return Object(a.jsxs)("div",{className:"NoPatternToComponent",children:[Object(a.jsx)(nn.VscRunAll,{size:30}),Object(a.jsx)("span",{className:"Template",children:t})]});var f=function(e){return function(t){var n=Object(B.a)({},m);n[e]=t.target.value.replace('"',""),s(n),p(n)}},x=function(e,t){var i="${"+t+"}";if(!e.includes(i))return Object(a.jsx)("span",{className:"Part",children:t});if("undefined"===typeof n[t])return"ERROR: "+t+" undefined in template";var c=n[t],s=t;switch(c.type.toLowerCase()){case"input":var r=s in m?m[s]:"";return Object(a.jsx)("span",{style:{display:"inline-block"},children:Object(a.jsx)(xe.a,Object(B.a)({value:r,onChange:f(s),size:"small",variant:"outlined",error:s in u},c.props))});default:return Object(a.jsxs)("span",{className:"Part",children:[">",t]})}};return Object(a.jsxs)("div",{className:"PatternToComponent",children:[Object(a.jsx)(nn.VscRunAll,{size:30}),j.map((function(e,t){return Object(a.jsx)(c.a.Fragment,{children:x(d,e)},e+t)}))]})}function cn(e){var t=e.data,n=e.onSubmit,c=e.onClose,s=Object(i.useState)({}),r=Object(z.a)(s,2),o=r[0],l=r[1],d=Object(i.useState)({}),j=Object(z.a)(d,2),u=j[0],b=j[1],O=u;if("undefined"===typeof t.metadata.form)return Object(a.jsx)(Se,{errorList:[{msg:"No form definded on server side",type:"Misconfiguration",loc:"Server side action API"}]});function h(e){var n=e.actions,i=e.onChange,c=e.initInputValues,s=e.errors;return n.map((function(e,n){return Object(a.jsx)(an,{template:e.template,params:t.metadata.form.params,onChange:i,errors:s,initInputValues:c},n)}))}return Object(a.jsxs)("div",{className:"ActionForm",children:[Object(a.jsx)("h1",{className:"Header",children:"This action performs the following"}),Object(a.jsx)("section",{className:"Template",children:Object(a.jsx)(h,{actions:t.metadata.form.steps,initInputValues:u,errors:o,onChange:function(e){O=e}})}),function(e){function t(e){if(Object.keys(e).length>0)return Object.entries(e).map((function(e,t){return{msg:"["+e[0]+"] "+e[1],loc:"ActionForm.js [137]",type:"Exception"}}))}return function(e){return Object.keys(e).length>0?Object(a.jsx)(Se,{errorList:t(e)}):""}(e)}(o),Object(a.jsxs)("section",{className:"Buttons",children:[Object(a.jsx)(rt,{label:"Save",icon:Object(a.jsx)(Qt.BsCheckCircle,{size:24,style:{marginRight:5}}),onClick:function(){if(!function(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var i=Object(z.a)(a[n],2),c=i[0],s=i[1];c in O&&""!==O[c]||(t[c]="Field cannot be empty"),new RegExp(s.validate.regexp,"g").test(O[c])||(t[c]=s.validate.error)}return b(O),l(t),Object.keys(t).length>0}(t.metadata.form.params)){var e=(a=t.metadata.form.signature,i=O,a.replace(/\${(.*?)}/g,(function(e,t){return t in i?i[t]:""})));n(e)}var a,i}}),Object(a.jsx)(rt,{label:"close",onClick:c})]})]})}var sn=n(941),rn=n(347),on=n(341),ln=n(343),dn=n(342),jn=n(345),un=n(344);function bn(e){var t,n=e.actionData,i=e.onClick;return Object(a.jsxs)("div",{className:"ActionCard",onClick:function(){i(n)},children:[Object(a.jsx)("div",{className:"Icon",children:(t=n.metadata.icon,"json"===t?Object(a.jsx)(on.VscJson,{size:50}):"addToList"===t?Object(a.jsx)(st.CgPlayListAdd,{size:50}):"copy"===t?Object(a.jsx)(dn.VscReferences,{size:50}):"removeFromList"===t?Object(a.jsx)(ln.CgPlayListRemove,{size:50}):"increment"===t?Object(a.jsx)(un.BsFileArrowUp,{size:50}):"decrement"===t?Object(a.jsx)(jn.BsFileArrowDown,{size:50}):Object(a.jsx)(tn.SiGithubactions,{size:50}))}),Object(a.jsx)("div",{className:"Title",children:n.function}),Object(a.jsx)("div",{className:"Description",children:n.metadata.description})]})}function On(e){var t=e.initCondition,n=e.initActions,c=e.onSubmit,s=Object(i.useState)(!1),r=Object(z.a)(s,2),o=(r[0],r[1]),l=Object(i.useState)(!1),d=Object(z.a)(l,2),j=d[0],u=d[1],b=Object(i.useState)(""),O=Object(z.a)(b,2),h=O[0],m=O[1],p=Object(i.useState)([]),f=Object(z.a)(p,2),x=f[0],v=f[1],g=Object(i.useState)(null),y=Object(z.a)(g,2),S=y[0],C=y[1],N=function(){pe({url:"/action/search?query="+encodeURIComponent(h),method:"get"},o,u,k,!1)};Object(i.useEffect)(N,[h]);var k=function(e){u(!1),C(null),v(e)},T=function(e){C(e)},R=function(){C(null)};return Object(a.jsxs)("div",{className:"RuleForm ThenForm",children:[Object(a.jsx)("div",{className:"Rule",children:Object(a.jsxs)("h1",{className:"Header",children:["When ",Object(a.jsx)(Gt,{condition:t})," Then ",Object(a.jsx)(Xt,{actions:n,onDelete:function(e){var t=Object(ne.a)(n);t.splice(e,1),c(t)}})]})}),Object(a.jsxs)("div",{className:"SearchInput",children:[Object(a.jsx)(xe.a,{id:"search-input",label:"Search for actions",onChange:function(e){m(e.target.value)},size:"small",fullWidth:!0,value:h,variant:"outlined",InputProps:{startAdornment:Object(a.jsx)(sn.a,{position:"start",children:Object(a.jsx)(rn.AiOutlineSearch,{size:24})})}}),Object(a.jsx)(rt,{label:"Search",onClick:N})]}),!1!==j&&Object(a.jsx)(Se,{errorList:j}),!S&&Object(a.jsx)("div",{className:"ActionSelector",children:function(e){if(e.data)return e.data.map((function(e,t){return Object(a.jsx)(bn,{actionData:e,onClick:T},t)}))}(x)}),S&&Object(a.jsx)(cn,{data:S,onSubmit:function(e){e&&(c([].concat(Object(ne.a)(n),[e])),R())},onClose:R})]})}n(713);var hn=n(348);function mn(e){var t=e.dataType,n=e.initCondition,s=e.onSubmit,r=e.onEvaluate,o=Object(i.useState)(n),l=Object(z.a)(o,2),d=l[0],j=l[1],u=Object(i.useState)({}),b=Object(z.a)(u,2),O=b[0],h=b[1],m=Object(i.useState)(!1),p=Object(z.a)(m,2),f=p[0],x=p[1],v=Object(i.useState)(!1),g=Object(z.a)(v,2),y=g[0],S=g[1],C=Object(i.useState)(n),N=Object(z.a)(C,2),k=N[0],T=N[1],R=function(e){!1!==e&&(h(e.data),T(d),s(d))};return Object(a.jsxs)("section",{className:"RuleForm IfForm",children:[Object(a.jsx)("div",{className:"Rule",children:Object(a.jsxs)("h1",{className:"Header",children:["When ",Object(a.jsx)(Gt,{condition:k,onDelete:function(){T(""),s("")}})]})}),Object(a.jsxs)("div",{className:"Code",children:[Object(a.jsxs)("div",{className:"Elevate",children:[Object(a.jsx)("div",{className:"Description",children:"Type condition to evaluate its range. Click EVALUATE to see its potential impact."}),Object(a.jsx)(xe.a,{label:"Condition",multiline:!0,rows:2,value:d,onChange:function(e){j(e.target.value)},variant:"outlined",fullWidth:!0}),Object(a.jsx)("div",{className:"Buttons",children:Object(a.jsx)(rt,{label:"Evaluate & save",icon:Object(a.jsx)(hn.VscDebugAlt,{size:20,style:{marginRight:"5px"}}),onClick:function(){pe(r(d),x,S,R)}})})]}),function(e,n,i){return Object(a.jsxs)(c.a.Fragment,{children:[function(e){if(e&&e.total)return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsxs)("h1",{className:"EvalHeader",children:["Then rule will evaluate about ",e?e.total:"unknown"," ",Object(a.jsx)("u",{children:t})," a month"]}),Object(a.jsx)("h2",{className:"SubHeader",children:"Please find sample events below"})]})}(e),Object(a.jsx)(Dt,{data:e,loading:n,errors:i,timeField:function(e){return[e.timeStamp,e.scope,e.eventType]},timeFieldLabel:"Timestamp",filterFields:[]})]})}(O,f,y)]})]})}n(714);var pn=n(382);n(715);function fn(e){var t=e.formType,n=e.initCondition,i=e.initActions,c=e.initScope,s=e.initName,r=e.initTags,o=e.initDesc,l=e.onScopeSubmit,d=e.onNameSubmit,j=e.onDescSubmit,u=e.onTagsSubmit;return Object(a.jsxs)("div",{className:"RuleForm RuleNameForm",children:[Object(a.jsx)("div",{className:"Rule",children:Object(a.jsx)("h1",{className:"Header",children:Object(a.jsx)(Zt,{type:t,data:{uql:{name:s,scope:c,tags:r,condition:n,actions:i}}})})}),Object(a.jsxs)("div",{className:"Elevate",children:[Object(a.jsx)("h1",{className:"Header",style:{marginTop:0},children:"Scope"}),Object(a.jsxs)("div",{className:"Description",children:["Set scope and ",t.toLowerCase()," name. Scope is an id of your site."]}),Object(a.jsx)(xe.a,{label:"Scope",value:c,onChange:function(e){l(e.target.value)},size:"small",variant:"outlined"}),Object(a.jsx)("h1",{className:"Header",children:"Name"}),Object(a.jsxs)("div",{className:"Description",children:[t," name can be any string that identifies ",t.toLowerCase(),". ",t," id is made out of ",t.toLowerCase(),"name by replacing spaces with hyphens and lowering the string"]}),Object(a.jsx)(xe.a,{label:t+" name",value:s,onChange:function(e){d(e.target.value)},size:"small",variant:"outlined",fullWidth:!0}),Object(a.jsxs)("h1",{className:"Header",children:["Tags ",Object(a.jsx)("sup",{style:{fontSize:"70%"},children:"* optional"})]}),Object(a.jsxs)("div",{className:"Description",children:["Tags will help you to find a ",t.toLowerCase(),"."]}),Object(a.jsx)(pn.a,{tags:r||[],onChange:function(e){return u(e)},removeOnBackspace:!0,maxTags:10,placeholder:"Type tag and press enter"}),Object(a.jsxs)("h1",{className:"Header",children:["Description ",Object(a.jsx)("sup",{style:{fontSize:"70%"},children:"* optional"})]}),Object(a.jsxs)("div",{className:"Description",children:["Description will help you to understand what a ",t.toLowerCase()," is doing."]}),Object(a.jsx)(xe.a,{label:t+" description",value:o,multiline:!0,rows:3,onChange:function(e){j(e.target.value)},variant:"outlined",fullWidth:!0})]})]})}n(716),n(717);function xn(e){var t=e.label;return Object(a.jsxs)("div",{className:"SuccessTag",children:[Object(a.jsx)(Qt.BsCheckCircle,{size:24,style:{marginRight:5}}),t]})}function vn(e){var t=e.formType,n=e.initCondition,i=e.initActions,c=e.initScope,s=e.initName,r=e.initTags,o=e.initDesc,l=e.onSubmit,d=e.success;return Object(a.jsx)("div",{className:"RuleForm SaveForm",children:Object(a.jsxs)("div",{className:null!==d?d?"Elevate ElevateOk":"Elevate ElevateFailed":"Elevate",children:[Object(a.jsx)("h1",{className:"Header",style:{marginTop:0},children:"Summary"}),Object(a.jsxs)("div",{className:"Rule",children:[Object(a.jsxs)("h1",{className:"Header",children:[t," ",Object(a.jsx)(Wt,{name:s})]}),Object(a.jsxs)("h1",{children:["In scope ",Object(a.jsx)(Vt,{scope:c})," With tags ",Object(a.jsx)(Kt,{tags:r})]}),Object(a.jsxs)("h1",{children:["When ",Object(a.jsx)(Gt,{condition:n})]}),i&&Object(a.jsxs)("h1",{children:["Then ",Object(a.jsx)(Xt,{actions:i})]})]}),Object(a.jsx)("h1",{className:"Header",style:{marginTop:0},children:"Description"}),o||"No description provided.",Object(a.jsxs)("div",{className:"Buttons",children:[Object(a.jsx)(rt,{label:"save & commit",icon:Object(a.jsx)(Qt.BsCheckCircle,{size:24,style:{marginRight:5}}),onClick:l,disabled:d}),d&&Object(a.jsx)(xn,{label:"Saved without errors"})]})]})})}function gn(e){var t=e.init,n=c.a.useState(0),s=Object(z.a)(n,2),r=s[0],o=s[1],l=c.a.useState(new Set),d=Object(z.a)(l,2),j=d[0],u=d[1],b=Object(i.useState)(t.actions),O=Object(z.a)(b,2),h=O[0],m=O[1],p=Object(i.useState)(t.condition),f=Object(z.a)(p,2),x=f[0],v=f[1],g=Object(i.useState)(t.scope),y=Object(z.a)(g,2),S=y[0],C=y[1],N=Object(i.useState)(t.name),k=Object(z.a)(N,2),T=k[0],R=k[1],w=c.a.useState(t.tags),D=Object(z.a)(w,2),L=D[0],E=D[1],A=Object(i.useState)(t.description),F=Object(z.a)(A,2),I=F[0],_=F[1],q=Object(i.useState)(!1),P=Object(z.a)(q,2),M=P[0],H=P[1],W=Object(i.useState)(null),U=Object(z.a)(W,2),V=U[0],J=U[1],K=["When event","Then","Name & Tags","Save it"],Q=function(){pe({url:"/rule",method:"post",data:{name:T,description:I,scope:S,tags:L,condition:x,actions:h}},(function(){}),H,(function(e){J(!1!==e)}))},G=function(e){return{url:"/event/select?simplified=0&limit=5",method:"post",header:{"Content-type":"text/plain"},data:e}};var Y=function(e){return j.has(e)},X=function(e){J(null),H(!1),o(e)},Z=function(){var e=j;Y(r)&&(e=new Set(e.values())).delete(r),X((function(e){return e+1})),u(e)},$=function(){X((function(e){return e-1}))},ee=function(){X(0)},te=Object(ve.a)((function(e){return{root:{width:"100%",padding:"15px",backgroundColor:"inherit"}}}))();return Object(a.jsxs)("div",{className:"NewRule",children:[Object(a.jsxs)("div",{className:"Top",children:[Object(a.jsx)(at.a,{activeStep:r,className:te.root,children:K.map((function(e,t){var n={},i={};return Y(t)&&(n.completed=!1),Object(a.jsx)(et.a,Object(B.a)(Object(B.a)({onClickCapture:function(){X(t)},style:{cursor:"pointer"}},n),{},{children:Object(a.jsx)(tt.a,Object(B.a)(Object(B.a)({},i),{},{children:e}))}),e)}))}),function(){var e=function(){var e={variant:"contained",color:"primary",onClick:Z};return r!==K.length-1?Object(a.jsx)(_e.a,Object(B.a)(Object(B.a)({},e),{},{children:"Next"})):Object(a.jsx)(_e.a,{disabled:!0,variant:"contained",children:"Next"})};return r===K.length?Object(a.jsxs)("div",{children:[Object(a.jsx)(se.a,{children:"All steps completed - you're finished"}),Object(a.jsx)(_e.a,{onClick:ee,children:"Reset"})]}):Object(a.jsxs)("nav",{className:"Navigation",children:[Object(a.jsx)(_e.a,{disabled:0===r,onClick:$,children:"Back"}),!1,Object(a.jsx)(e,{})]})}()]}),M&&Object(a.jsx)(Se,{errorList:M}),Object(a.jsx)("section",{className:"NewRuleForm",children:function(e){switch(e){case 0:return Object(a.jsx)(mn,{dataType:"events",initCondition:x,onEvaluate:G,onSubmit:v});case 1:return Object(a.jsx)(On,{initCondition:x,initActions:h,onSubmit:m});case 2:return Object(a.jsx)(fn,{formType:"Rule",initCondition:x,initActions:h,initScope:S,initName:T,initTags:L,initDesc:I,onScopeSubmit:C,onNameSubmit:R,onDescSubmit:_,onTagsSubmit:E});case 3:return Object(a.jsx)(vn,{formType:"Rule",initCondition:x,initActions:h,initScope:S,initName:T,initTags:L,initDesc:I,onSubmit:Q,success:V});default:return"Unknown step"}}(r)})]})}function yn(e){var t=e.init,n=e.width,i=e.label,c=e.open,s=e.onClose,r=function(e){s(e)};return Object(a.jsx)(Ze.a,{anchor:"right",open:c,onClose:r,children:Object(a.jsxs)("div",{style:{width:n||1200,overflowX:"hidden"},children:[Object(a.jsx)(Xe,{onClose:r,children:Object(a.jsx)("span",{style:{fontWeight:600},children:i})}),c&&Object(a.jsx)(gn,{init:t})]})})}var Sn=Object(P.b)((function(e){return{}}),{showAlert:k})((function(e){var t=e.showAlert,n=c.a.useState({actions:[],condition:"",scope:"",name:"",tags:[],description:""}),i=Object(z.a)(n,2),s=i[0],r=i[1],o=c.a.useState(!1),l=Object(z.a)(o,2),d=l[0],j=l[1],u=c.a.useState(!1),b=Object(z.a)(u,2),O=b[0],h=b[1],m=c.a.useState(!1),p=Object(z.a)(m,2),f=p[0],x=p[1],v=c.a.useState(!1),g=Object(z.a)(v,2),y=g[0],S=g[1],C=function(){},N=function(e){S(!1)},k=function(e){he("/rule/"+e,h,x,S)},T=function(e){me("/rule/"+e,C,C,N)},R=function(e){r({actions:e.actions,condition:e.condition,scope:e.scope,name:e.name,tags:e.tags,description:e.description}),j(!0)},w=function(e){r({actions:e.actions,condition:e.condition,scope:e.scope,name:"",tags:e.tags,description:e.description}),j(!0)};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Qe,{buttons:[Object(a.jsx)(rt,{label:"Add rule",onClick:function(){r({actions:[],condition:"",scope:"",name:"",tags:[],description:""}),j(!0)},icon:Object(a.jsx)(st.CgPlayListAdd,{size:24,style:{marginRight:5}})})],children:Object(a.jsx)(Ge,{})}),Object(a.jsx)(fe,{list:function(){return Object(a.jsx)(ke,{endPoinyUrl:"/rule/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(xt,{data:e,onClick:k},t)}))},filterLabel:"Type condition to filter rules",filterKey:"filterRuleQuery"})},detail:function(){return!1!==y?Object(a.jsx)(en,{data:y.data,onDelete:T,onEdit:R,onDuplicate:w}):!0===O?Object(a.jsx)(Ne,{}):!1!==f?(t({message:f[0].msg,type:"error",hideAfter:2e3}),""):void 0}}),Object(a.jsx)(yn,{init:s,label:"Create Rule",open:d,onClose:function(){return j(!1)}})]})}));function Cn(e){var t=e.data,n=e.onEdit,i=e.onDuplicate,s=e.onDelete,r=c.a.useState(!1),o=Object(z.a)(r,2),l=o[0],d=o[1],j=!!window.chrome?{zIndex:5,backgroundColor:"rgba(255,255,255,.3)",marginBottom:0}:{zIndex:5,marginBottom:0};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ie,{label:t.unomi.metadata.name}),Object(a.jsxs)("div",{className:"RightTabScroller",style:{height:"calc(100% - 175px)"},children:[Object(a.jsx)(Pt,{style:{position:"sticky",top:8},children:Object(a.jsxs)(Re,{style:j,children:[t.uql&&Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(De,{children:"Segment logic"}),Object(a.jsx)(Zt,{data:t,type:"Segment"})]}),t.unomi.metadata.description&&Object(a.jsxs)("div",{children:[Object(a.jsx)(De,{children:"description"}),t.unomi.metadata.description]}),Object(a.jsxs)("div",{className:"DetailActionButtons",children:[Object(a.jsx)(rt,{onClick:function(){t.uql&&n(t.uql)},label:"Edit",disabled:"undefined"===typeof t.uql}),Object(a.jsx)(rt,{onClick:function(){t.uql&&i(t.uql)},label:"Duplicate",disabled:"undefined"===typeof t.uql}),Object(a.jsx)(rt,{onClick:function(){d(!0)},label:"Delete",disabled:"undefined"===typeof t.uql}),Object(a.jsx)(Je,{open:l,title:"Do you want to delete this segment?",content:"This can not be undone.",onClose:function(){d(!1)},onAgree:function(){d(!1),s(t.unomi.metadata.id)}})]})]})}),Object(a.jsx)("div",{style:{margin:"10px"},children:Object(a.jsxs)(qt,{tabs:["Stats","Raw","Settings"],children:[Object(a.jsx)(_t,{id:0,children:Object(a.jsx)("div",{style:{margin:"0 10px"}})}),Object(a.jsx)(_t,{id:1,children:Object(a.jsx)("div",{style:{margin:"20px"},className:"MoveUpOpacity",children:Object(a.jsx)(Fe.a,{data:t,theme:Ae,expandLevel:3})})}),Object(a.jsx)(_t,{id:2,children:Object(a.jsx)("div",{style:{margin:"20px"},className:"MoveUpOpacity",children:Object(a.jsx)(Ct,{index:"segment",id:t.unomi.metadata.id,meta:t.unomi.metadata})})})]})})]})]})}n(718);function Nn(e){var t=e.data,n=e.onClick;return Object(a.jsxs)("div",{onClick:function(e){n(t.metadata.id)},className:"Card",children:[Object(a.jsx)("span",{className:"enabled",children:t.metadata.enabled?Object(a.jsx)(ht.VscVmRunning,{size:24,style:{color:"darkgreen"}}):Object(a.jsx)(ut.VscVmOutline,{size:24,style:{color:"darkred"}})}),Object(a.jsx)("span",{className:"hidden",children:t.metadata.hidden?Object(a.jsx)(bt.VscEyeClosed,{size:24}):Object(a.jsx)(Ot.VscEye,{size:24})}),Object(a.jsx)("span",{className:"readonly",children:t.metadata.readOnly?Object(a.jsx)(mt.VscGistSecret,{size:24}):Object(a.jsx)(pt.VscFile,{size:24})}),Object(a.jsx)("span",{className:"missing",children:t.metadata.missingPlugins?Object(a.jsx)(ft.VscExclude,{size:24,style:{color:"darkred"}}):""}),Object(a.jsx)("span",{className:"scope",children:t.metadata.scope}),Object(a.jsx)("span",{className:"name",children:t.metadata.name})]})}function kn(e){var t=e.init,n=c.a.useState(0),s=Object(z.a)(n,2),r=s[0],o=s[1],l=c.a.useState(new Set),d=Object(z.a)(l,2),j=d[0],u=d[1],b=Object(i.useState)(t.condition),O=Object(z.a)(b,2),h=O[0],m=O[1],p=Object(i.useState)(t.scope),f=Object(z.a)(p,2),x=f[0],v=f[1],g=Object(i.useState)(t.name),y=Object(z.a)(g,2),S=y[0],C=y[1],N=c.a.useState(t.tags),k=Object(z.a)(N,2),T=k[0],R=k[1],w=Object(i.useState)(t.description),D=Object(z.a)(w,2),L=D[0],E=D[1],A=Object(i.useState)(!1),F=Object(z.a)(A,2),I=F[0],_=F[1],q=Object(i.useState)(null),P=Object(z.a)(q,2),M=P[0],H=P[1],W=["When profile","Segment Name & Tags","Save it"],U=function(){pe({url:"/segment",method:"post",data:{name:S,description:L,scope:x,tags:T,condition:h}},(function(){}),_,(function(e){H(!1!==e)}))},V=function(e){return{url:"/profile/select?simplified=0&limit=5",method:"post",header:{"Content-type":"text/plain"},data:e}};var J=function(e){return j.has(e)},K=function(e){H(null),_(!1),o(e)},Q=function(){var e=j;J(r)&&(e=new Set(e.values())).delete(r),K((function(e){return e+1})),u(e)},G=function(){K((function(e){return e-1}))},Y=function(){K(0)},X=Object(ve.a)((function(e){return{root:{width:"100%",padding:"15px",backgroundColor:"inherit"}}}))();return Object(a.jsxs)("div",{className:"NewRule",children:[Object(a.jsxs)("div",{className:"Top",children:[Object(a.jsx)(at.a,{activeStep:r,className:X.root,children:W.map((function(e,t){var n={},i={};return J(t)&&(n.completed=!1),Object(a.jsx)(et.a,Object(B.a)(Object(B.a)({onClickCapture:function(){K(t)},style:{cursor:"pointer"}},n),{},{children:Object(a.jsx)(tt.a,Object(B.a)(Object(B.a)({},i),{},{children:e}))}),e)}))}),function(){var e=function(){var e={variant:"contained",color:"primary",onClick:Q};return r!==W.length-1?Object(a.jsx)(_e.a,Object(B.a)(Object(B.a)({},e),{},{children:"Next"})):Object(a.jsx)(_e.a,{disabled:!0,variant:"contained",children:"Next"})};return r===W.length?Object(a.jsxs)("div",{children:[Object(a.jsx)(se.a,{children:"All steps completed - you're finished"}),Object(a.jsx)(_e.a,{onClick:Y,children:"Reset"})]}):Object(a.jsxs)("nav",{className:"Navigation",children:[Object(a.jsx)(_e.a,{disabled:0===r,onClick:G,children:"Back"}),!1,Object(a.jsx)(e,{})]})}()]}),I&&Object(a.jsx)(Se,{errorList:I}),Object(a.jsx)("section",{className:"NewRuleForm",children:function(e){switch(e){case 0:return Object(a.jsx)(mn,{dataType:"profiles",initCondition:h,onEvaluate:V,onSubmit:m});case 1:return Object(a.jsx)(fn,{formType:"Segment",initCondition:h,initScope:x,initName:S,initTags:T,initDesc:L,onScopeSubmit:v,onNameSubmit:C,onDescSubmit:E,onTagsSubmit:R});case 2:return Object(a.jsx)(vn,{formType:"Segment",initCondition:h,initScope:x,initName:S,initTags:T,initDesc:L,onSubmit:U,success:M});default:return"Unknown step"}}(r)})]})}function Tn(e){var t=e.init,n=e.width,i=e.label,c=e.open,s=e.onClose,r=function(e){s(e)};return Object(a.jsx)(Ze.a,{anchor:"right",open:c,onClose:r,children:Object(a.jsxs)("div",{style:{width:n||1200,overflowX:"hidden"},children:[Object(a.jsx)(Xe,{onClose:r,children:Object(a.jsx)("span",{style:{fontWeight:600},children:i})}),c&&Object(a.jsx)(kn,{init:t})]})})}var Rn=Object(P.b)((function(e){return{notification:e.notificationReducer,uqlQuery:e.uqlReducer}}),{showAlert:k})((function(e){var t=e.showAlert,n=c.a.useState({condition:"",scope:"",name:"",tags:[],description:""}),i=Object(z.a)(n,2),s=i[0],r=i[1],o=c.a.useState(!1),l=Object(z.a)(o,2),d=l[0],j=l[1],u=c.a.useState(!1),b=Object(z.a)(u,2),O=(b[0],b[1]),h=c.a.useState(!1),m=Object(z.a)(h,2),p=m[0],f=m[1],x=c.a.useState(!1),v=Object(z.a)(x,2),g=v[0],y=v[1],S=function(){},C=function(e){r({condition:e.condition,scope:e.scope,name:e.name,tags:e.tags,description:e.description}),j(!0)},N=function(e){r({condition:e.condition,scope:e.scope,name:"",tags:e.tags,description:e.description}),j(!0)},k=function(e){y(!1)},T=function(e){he("/segment/"+e,O,f,y)},R=function(e){me("/segment/"+e,S,S,k)};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Qe,{buttons:[Object(a.jsx)(rt,{label:"Add segment",onClick:function(){r({condition:"",scope:"",name:"",tags:[],description:""}),j(!0)},icon:Object(a.jsx)(st.CgPlayListAdd,{size:24,style:{marginRight:5}})})],children:Object(a.jsx)(Ge,{})}),Object(a.jsx)(fe,{list:function(){return Object(a.jsx)(ke,{endPoinyUrl:"/segment/select",renderList:function(e){return e.map((function(e,t){return Object(a.jsx)(Nn,{data:e,onClick:T},t)}))},filterLabel:"Type condition to filter segments",filterKey:"segmentFilterQuery"})},detail:function(){return!1!==g?Object(a.jsx)(Cn,{data:g.data,onEdit:C,onDuplicate:N,onDelete:R}):!1!==p?(t({message:p[0].msg,type:"error",hideAfter:2e3}),""):void 0}}),Object(a.jsx)(Tn,{init:s,label:"Create Segment",open:d,onClose:function(){return j(!1)}})]})})),wn=(n(719),n(352)),Dn=n.n(wn);n(720);function Ln(e){var t=e.method,n=t.toUpperCase()+"Tag";return Object(a.jsx)("span",{className:n+" MethodTag",children:t.toUpperCase()})}n(721);function En(e){var t=Object.assign({},e),n="StatusCode"+t.children;return Object(a.jsx)("span",{className:n+" StatusCodeTag",children:t.children})}var An=n(381),Fn=n(351),In=n.n(Fn);var _n=function(e){var t=e.uql,n=c.a.useState(!1),s=Object(z.a)(n,2),r=s[0],o=s[1],l=c.a.useState(!1),d=Object(z.a)(l,2),j=d[0],u=d[1],b=c.a.useState(!1),O=Object(z.a)(b,2),h=O[0],m=O[1],p=c.a.useState(!1),f=Object(z.a)(p,2),x=f[0],v=f[1],g=c.a.useState(!1),y=Object(z.a)(g,2),S=y[0],C=y[1],N=c.a.useState(!1),k=Object(z.a)(N,2),T=k[0],R=k[1],w=c.a.useState("OK"),D=Object(z.a)(w,2),L=D[0],E=D[1],A=c.a.useState(!1),F=Object(z.a)(A,2),I=F[0],_=F[1],q=function(e){C(e),_(!1),R(!1)};Object(i.useEffect)((function(){!function(e,t,n,a,i){(!(arguments.length>5&&void 0!==arguments[5])||arguments[5])&&(a(!1),i(!1),n(!0));try{be({"Content-type":"text/plain"}).post(t,e).then((function(e){n(!1),i({data:e.data})})).catch((function(e){n(!1),"undefined"!=typeof e.response?a(e.response.data.detail):a(e.message)}))}catch(c){a(c.message)}}(t,"/console/uql2unomi/request",m,v,q)}),[t]);var P,B=function(e){if(!1===e.error){var t=S;t.data.body=e.jsObject,C(t),E("OK"),_(!1)}else _(!0),E("ERROR "+e.error.reason+" (line: "+e.error.line+")")},M=function(e,t){return!0===t?Object(a.jsx)(Ne,{}):!1!==x?Object(a.jsx)("pre",{children:x}):"undefined"!==typeof e.data?Object(a.jsx)(An.a,{id:"a_unique_id",placeholder:e.data.body,locale:In.a,onChange:B,colors:{background:"transparent",default:"black",number:"green",keys:"rgb(68, 68, 68)",string:"rgb(0, 105, 192)",primitive:"rgb(170, 0, 0)",error:"darkred"},style:{body:{fontSize:"13px",lineHeight:"1.2"},warningBox:{background:"#ccc"},errorMessage:{fontSize:"15px",color:"black",margin:"-2px 0 0 0"}},width:"100%",height:"100%"}):void 0},H=function(e,t){if(!1===t&&"undefined"!==typeof e&&!1!==e)return Object(a.jsxs)(c.a.Fragment,{children:[e.data.method&&Object(a.jsx)(Ln,{method:e.data.method}),e.data.url&&Object(a.jsxs)("span",{children:["URL: ",e.data.url]}),e.data.expectedStatus&&Object(a.jsxs)("span",{children:["EXPECT: ",Object(a.jsx)(En,{children:e.data.expectedStatus})]})]})},W=function(e,t){if(!1===t&&"undefined"!==typeof e&&!1!==e)return Object(a.jsx)(c.a.Fragment,{children:e.data.status&&Object(a.jsxs)("span",{children:["RESPONSE: ",Object(a.jsx)(En,{children:e.data.status})]})})},U=function(e){var t=e.disable,n="RunQuery";!0===t&&(n="DisableQuery");return Object(a.jsx)("div",{className:n,onClick:function(){!1!==S&&!1===t&&function(e,t,n,a,i){(!(arguments.length>5&&void 0!==arguments[5])||arguments[5])&&(a(!1),i(!1),n(!0));try{be({"Content-type":"application/json"}).post(t,e).then((function(e){n(!1),i({data:e.data})})).catch((function(e){n(!1),"undefined"!=typeof e.response?a(e.response.data.detail):a(e.message)}))}catch(c){a(c.message)}}(S.data,"/console/uql2unomi/response",o,u,R)},children:Object(a.jsx)(Dn.a,{})})};return Object(a.jsxs)("div",{className:"QueryResponseColumns",children:[Object(a.jsx)("div",{className:"QueryResponseLeftColumn",children:(P=S,Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{className:"RequestInfo",children:H(P,h)}),Object(a.jsx)("div",{className:"RequestBody",children:M(P,h)}),Object(a.jsx)("div",{className:"RequestStatus",children:L})]}))}),Object(a.jsx)(U,{disable:I}),Object(a.jsx)("div",{className:"QueryResponseRightColumn",children:function(e){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{className:"ResponseInfo",children:W(e,r)}),Object(a.jsx)("div",{className:"ResponseBody",children:(t=e,n=r,i=j,!0===n?Object(a.jsx)(Ne,{}):!1!==i?Object(a.jsx)("pre",{children:i}):"undefined"!==typeof t.data?Object(a.jsx)(Fe.a,{data:t.data.body,theme:Ae,expandLevel:3}):void 0)}),Object(a.jsx)("div",{className:"ResponseStatus",children:"OK"})]});var t,n,i}(T)})]})},qn=function(){var e=localStorage.getItem("consoleUql"),t=c.a.useState(e||""),n=Object(z.a)(t,2),i=n[0],s=n[1];return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Qe,{children:Object(a.jsx)(Ge,{})}),Object(a.jsx)("div",{style:{margin:"7px 5px"},children:Object(a.jsx)(ge,{variant:"outlined",label:"UQL",onEnterPressed:function(e){s(e),localStorage.setItem("consoleUql",e)},initValue:i})}),Object(a.jsx)(_n,{uql:i}),";"]})},Pn=n(127),zn=n.n(Pn),Bn=n(353),Mn=n(194),Hn=n(195),Wn=n(196),Un=n(204),Vn=n(248),Jn=n.n(Vn),Kn=function(e){Object(Wn.a)(n,e);var t=Object(Un.a)(n);function n(e){var a;return Object(Mn.a)(this,n),a=t.call(this,e),Jn.a.setOptions({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),a}return Object(Hn.a)(n,[{key:"render",value:function(){var e=this.props.text,t=Jn()(e||"");return Object(a.jsx)("div",{children:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})}}]),n}(c.a.Component),Qn=(n(724),function(e){var t=e.mdFile,s=Object(i.useState)(""),r=Object(z.a)(s,2),o=r[0],l=r[1];function d(){return(d=Object(Bn.a)(zn.a.mark((function e(t){var a,i;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(725)("./".concat(t,".md"));case 2:return a=e.sent,e.next=5,fetch(a.default);case 5:return i=e.sent,e.next=8,i.text();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){(function(e){return d.apply(this,arguments)})(t).then((function(e){l(e)}))})),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Qe,{children:Object(a.jsx)(Ge,{})}),Object(a.jsx)("div",{className:"ManualPage",children:Object(a.jsx)(K,{style:{padding:10},children:Object(a.jsx)(Kn,{text:o})})})]})});function Gn(e){var t=e.children,n=Object(H.h)();return c.a.Children.map(t,(function(e){return n.pathname.substring(0,e.props.link.length)===e.props.link?e:""}))}function Yn(e){return e.children}Yn.propTypes={link:Ft.a.string.isRequired};n(133),n(726);var Xn=n(357),Zn=(n(727),n(929)),$n=n(354),ea=n.n($n);n(743);function ta(e){var t=e.onDateSelect,n=e.datetime,c=Object(i.useState)(n.year),s=Object(z.a)(c,2),r=s[0],o=s[1],l=Object(i.useState)(n.month),d=Object(z.a)(l,2),j=d[0],u=d[1],b=Object(i.useState)(n.meridiem),O=Object(z.a)(b,2),h=O[0],m=O[1],p=Object(i.useState)(n.date),f=Object(z.a)(p,2),x=f[0],v=f[1],g=Object(i.useState)(n.second),y=Object(z.a)(g,2),S=y[0],C=y[1],N=Object(i.useState)(n.minute),k=Object(z.a)(N,2),T=k[0],R=k[1],w=Object(i.useState)(n.hour),D=Object(z.a)(w,2),L=D[0],E=D[1];Object(i.useEffect)((function(){t({year:r,month:j,meridiem:h,date:x,hour:L,minute:T,second:S,relative:{type:null,value:null,entity:null},now:null})}),[r,j,x,L,T,S,h]);return Object(a.jsx)(ea.a,{size:"xs",mode:1,show:!0,locale:"en-us",onClose:function(){},defaultTime:"".concat(L,":").concat(T,":").concat(S," ").concat(h),defaultDate:"".concat(j,"/").concat(x,"/").concat(r),onYearPicked:function(e){return o(e.year)},onMonthPicked:function(e){return u(e.month)},onDatePicked:function(e){return v(e.date)},onResetDate:function(e){v(e.date),u(e.month),o(e.year)},onResetDefaultDate:function(e){v(e.date),u(e.month),o(e.year)},onSecondChange:function(e){return C(e.value)},onMinuteChange:function(e){return R(e.value)},onHourChange:function(e){return E(e.value)},onMeridiemChange:m,onResetTime:function(e){E(e.clockHandHour.value),R(e.clockHandMinute.value),C(e.clockHandSecond.value),m(e.meridiem)},onResetDefaultTime:function(e){E(e.clockHandHour.value),R(e.clockHandMinute.value),C(e.clockHandSecond.value),m(e.meridiem)},onClearTime:function(e){E(e.clockHandHour.value),R(e.clockHandMinute.value),C(e.clockHandSecond.value),m(e.meridiem)}})}var na=n(971);function aa(e){var t,n,c,s=e.type,r=e.onDateSelect,o=e.datetime,l="FromDate"===s?"minus":"plus",d=Object(i.useState)((null===o||void 0===o||null===(t=o.relative)||void 0===t?void 0:t.type)?o.relative.type:l),j=Object(z.a)(d,2),u=j[0],b=j[1],O=Object(i.useState)((null===o||void 0===o||null===(n=o.relative)||void 0===n?void 0:n.value)?o.relative.value:15),h=Object(z.a)(O,2),m=h[0],p=h[1],f=Object(i.useState)((null===o||void 0===o||null===(c=o.relative)||void 0===c?void 0:c.entity)?o.relative.entity:"minutes"),x=Object(z.a)(f,2),v=x[0],g=x[1];return Object(i.useEffect)((function(){var e=Object(B.a)(Object(B.a)({},o),{},{relative:{type:u,value:m,entity:v},now:null});r(e)}),[u,m,v]),Object(a.jsxs)("div",{className:"PeriodPicker",children:[Object(a.jsx)("div",{className:"PeriodHeader",children:"Select period"}),Object(a.jsxs)("div",{className:"PeriodForm",children:[Object(a.jsx)("span",{style:{margin:10,fontSize:"1.5em",textTransform:"uppercase"},children:l}),Object(a.jsx)(xe.a,{id:"standard-number",type:"number",variant:"outlined",size:"small",value:m,onChange:function(e){return p(e.target.value)},InputLabelProps:{shrink:!0},style:{width:100,margin:2}}),Object(a.jsxs)(xe.a,{select:!0,variant:"outlined",size:"small",value:v,style:{width:150},onChange:function(e){return g(e.target.value)},children:[Object(a.jsx)(na.a,{value:"minutes",selected:!0,children:"Minutes"}),Object(a.jsx)(na.a,{value:"hours",children:"Hour"}),Object(a.jsx)(na.a,{value:"days",children:"Days"}),Object(a.jsx)(na.a,{value:"weeks",children:"Weeks"}),Object(a.jsx)(na.a,{value:"months",children:"Months"}),Object(a.jsx)(na.a,{value:"years",children:"Years"})]})]}),Object(a.jsxs)("div",{className:"PeriodsList",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("minutes"),p(15)},children:[l," 15 minutes"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("minutes"),p(30)},children:[l," 30 minutes"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("hours"),p(1)},children:[l," 1 hour"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("hours"),p(3)},children:[l," 3 hours"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("hours"),p(8)},children:[l," 8 hours"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("hours"),p(12)},children:[l," 12 hours"]})})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("days"),p(1)},children:[l," day"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("days"),p(2)},children:[l," 2 days"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("weeks"),p(1)},children:[l," week"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("weeks"),p(2)},children:[l," 2 weeks"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("months"),p(1)},children:[l," month"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{onClick:function(){b(l),g("years"),p(1)},children:[l," year"]})})]})]})]})}var ia=n(356),ca=n(355),sa=function(e){var t=e.onDateSelect,n=e.datetime;return Object(a.jsxs)("div",{className:"DateNow",children:[Object(a.jsx)("div",{children:'Setting the time to "now" means that on every refresh this time will be set to current date and time.'}),Object(a.jsx)(rt,{label:"Set to NOW",style:{width:240,marginLeft:20},icon:Object(a.jsx)(ca.BiTimeFive,{size:20,style:{marginRight:5}}),onClick:function(){return function(){var e=Object(B.a)(Object(B.a)({},n),{},{relative:{type:null,value:null,entity:null},now:"now"});t(e)}()}})]})};function ra(e){var t=e.type,n=e.datetime,c=e.onDatetimeSelect,s=Object(i.useState)(null),r=Object(z.a)(s,2),o=r[0],l=r[1],d=Object(i.useState)(function(e){var t;return(null===e||void 0===e?void 0:e.now)&&"now"===e.now?2:(null===e||void 0===e||null===(t=e.relative)||void 0===t?void 0:t.value)&&null!=e.relative.value?1:0}(n)),j=Object(z.a)(d,2),u=j[0],b=j[1],O=function(e){c(e)},h=Boolean(o),m=h?"datetime-popover":void 0,p=Object(ve.a)((function(e){return{root:{marginTop:5,transform:"none",transition:"none"}}}))();return Object(a.jsxs)("div",{children:[Object(a.jsx)(rt,{icon:Object(a.jsx)(ia.IoCalendarOutline,{size:24,style:{marginRight:5}}),style:{width:240,marginLeft:5,padding:"6px 15px"},label:function(e){var t;return(null===e||void 0===e?void 0:e.now)?e.now:(null===e||void 0===e||null===(t=e.relative)||void 0===t?void 0:t.value)?e.relative.type+" "+e.relative.value+" "+e.relative.entity:e.year+"/"+e.month+"/"+e.date+" @ "+e.hour+":"+e.minute+":"+e.second+e.meridiem}(n),onClick:function(e){l(e.currentTarget)}}),Object(a.jsx)(Zn.a,{id:m,className:p.root,open:h,anchorEl:o,onClose:function(){l(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(a.jsx)("div",{className:"DateTimePicker",children:Object(a.jsxs)(qt,{tabs:["Date & time","Relative","Now"],defaultTab:u,onTabSelect:b,children:[Object(a.jsx)(_t,{id:0,children:Object(a.jsx)(ta,{onDateSelect:O,datetime:n})}),Object(a.jsx)(_t,{id:1,children:Object(a.jsx)(aa,{type:t,onDateSelect:O,datetime:n})}),Object(a.jsx)(_t,{id:2,children:Object(a.jsx)(sa,{onDateSelect:O,datetime:n})})]})})})]})}function oa(e){var t=e.type,n=e.initDate,c=e.onFilterClick,s=e.initRefresh,r=e.onRefreshChange,o=Object(i.useState)(n.fromDate),l=Object(z.a)(o,2),d=l[0],j=l[1],u=Object(i.useState)(n.toDate),b=Object(z.a)(u,2),O=b[0],h=b[1],m=Object(i.useState)(n.query),p=Object(z.a)(m,2),f=p[0],x=p[1];function v(){localStorage.setItem(t+"Query",f),c({from:d,to:O,query:f})}return Object(a.jsxs)("section",{className:"ObjectFiltering",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(xe.a,{select:!0,variant:"outlined",size:"small",value:s,style:{width:130,marginRight:5},onChange:function(e){return t=e.target.value,void r(t);var t},children:[Object(a.jsx)(na.a,{value:0,selected:!0,children:"No refresh"}),Object(a.jsx)(na.a,{value:5,children:"5 seconds"}),Object(a.jsx)(na.a,{value:15,children:"15 seconds"}),Object(a.jsx)(na.a,{value:30,children:"30 seconds"}),Object(a.jsx)(na.a,{value:60,children:"1 minute"})]})}),Object(a.jsx)("div",{className:"Input",children:Object(a.jsx)(xe.a,{id:"search-input",label:"Filter",value:f,onKeyPressCapture:function(e){"Enter"===e.key&&v()},onChange:function(e){x(e.target.value)},size:"small",variant:"outlined",fullWidth:!0})}),Object(a.jsx)("div",{className:"Date",children:Object(a.jsx)(ra,{type:"FromDate",datetime:d,onDatetimeSelect:function(e){localStorage.setItem(t+"DateFrom",JSON.stringify(e)),j(e)}})}),Object(a.jsx)("div",{className:"Date",children:Object(a.jsx)(ra,{type:"ToDate",datetime:O,onDatetimeSelect:function(e){localStorage.setItem(t+"DateTo",JSON.stringify(e)),h(e)}})}),Object(a.jsx)("div",{className:"Action",children:Object(a.jsx)(rt,{label:"Filter",style:{padding:"8px 14px"},onClick:v,icon:Object(a.jsx)(Xn.AiOutlineFilter,{size:20,style:{marginRight:5}})})})]})}n(744);var la=n(358),da=n.n(la);var ja=function(e){var t=e.filterFields,n=e.detailsLabel,s=e.timeFieldLabel,r=e.timeField,o=e.onLoadRequest,l=e.onLoadDetails,d=e.detailsDrawerWidth,j=e.displayDetails,u=c.a.useState(!1),b=Object(z.a)(u,2),O=b[0],h=b[1],m=c.a.useState(!1),p=Object(z.a)(m,2),f=p[0],x=p[1],v=c.a.useState(!1),g=Object(z.a)(v,2),y=g[0],S=g[1],C=c.a.useState(!1),N=Object(z.a)(C,2),k=N[0],T=N[1],R=c.a.useState(null),w=Object(z.a)(R,2),D=w[0],L=w[1];Object(i.useEffect)((function(){pe(o,(function(e){h(e)}),(function(e){x(e)}),(function(e){S(e)}))}),[o]);var E=d||600,A=function(){T(!1)},F=function(){},I=function(e){L(e)},_=da()((function(e){return{drawerPaper:{overflow:"hidden"}}}))();return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Dt,{data:y.data,loading:O,errors:f,timeField:r,timeFieldLabel:s,filterFields:t,onLoadDetails:l,onDetails:function(e){l&&(T(!0),pe(l(e),F,F,I))}}),l&&Object(a.jsx)(Ze.a,{anchor:"right",open:k,onClose:A,classes:{paper:_.drawerPaper},children:Object(a.jsxs)("div",{style:{width:E,height:"inherit"},children:[Object(a.jsx)(Xe,{onClose:A,children:Object(a.jsx)("span",{style:{fontWeight:600},children:n})}),j&&D&&j(D.data)]})})]})};function ua(e){var t=e.children,n=e.onLoadDataRequest,i=e.onLoadDetails,c=e.timeField,s=e.timeFieldLabel,r=e.filterFields,o=e.initQuery,l=e.displayDetails,d=e.detailsDrawerWidth,j=e.detailsLabel;return Object(a.jsxs)("section",{children:[Object(a.jsx)("div",{children:t}),Object(a.jsx)("div",{children:Object(a.jsx)(ja,{onLoadRequest:n(o),onLoadDetails:i,filterFields:r,timeField:c,timeFieldLabel:s,displayDetails:l,detailsDrawerWidth:d,detailsLabel:j})})]})}var ba=n(943),Oa=n(944),ha=n(948),ma=n(147),pa=n(383),fa=n(201),xa=n(202);n(291);function va(e){var t=e.onLoadRequest,n=e.columns,s=c.a.useState(!1),r=Object(z.a)(s,2),o=r[0],l=r[1],d=c.a.useState(!1),j=Object(z.a)(d,2),u=j[0],b=j[1],O=c.a.useState(!1),h=Object(z.a)(O,2),m=h[0],p=h[1];Object(i.useEffect)((function(){pe(t,(function(e){l(e)}),(function(e){b(e)}),(function(e){p(e)}))}),[t]);var f=function(e){var t=e.active,n=e.payload,i=e.label;return t&&n&&n.length?Object(a.jsxs)("div",{className:"ChartToolTip",children:[Object(a.jsx)("p",{children:"Start time : ".concat(i)}),Object(a.jsx)("p",{children:"Time span : ".concat(n[0].payload.interval)}),Object(a.jsx)("p",{children:"Value : ".concat(n[0].value)})]}):null};return Object(a.jsxs)("div",{style:{height:200,width:"100%"},children:[!0===o&&Object(a.jsx)(Ne,{}),!1!==u&&Object(a.jsx)(Se,{errorList:u}),!1!==m&&Object(a.jsx)(ba.a,{children:Object(a.jsxs)(Oa.a,{data:m.data.data,margin:{top:15,right:20,bottom:5,left:0},children:[Object(a.jsx)(ha.a,{strokeDasharray:"3 3"}),Object(a.jsx)(ma.a,{isAnimationActive:!1,content:Object(a.jsx)(f,{})}),n.map((function(e,t){return Object(a.jsx)(pa.a,{stackId:e.stackId?e.stackId:"stack",dataKey:e.label,fill:e.color?e.color:"#ffa000"},t)})),Object(a.jsx)(fa.a,{dataKey:"time",style:{fontSize:"80%"}}),Object(a.jsx)(xa.a,{style:{fontSize:"90%"}})]})})]})}function ga(e){var t=e.type,n=e.onLoadDataRequest,c=e.onLoadHistogramRequest,s=e.onLoadDetails,r=e.detailsLabel,o=e.timeField,l=e.timeFieldLabel,d=e.displayDetails,j=e.detailsDrawerWidth,u=e.filterFields,b=function(e,t){var n,a=e+t;try{n=JSON.parse(localStorage.getItem(a))}catch(s){n=null}if(!n){var i=Et()(),c={year:i.format("YYYY"),month:i.format("MM"),meridiem:i.format("a"),date:i.format("DD"),hour:i.format("hh"),minute:i.format("mm"),second:i.format("ss"),relative:{type:null,value:null,entity:null},now:null};"DateTo"===t&&(c.now="now"),"DateFrom"===t&&(c.relative={type:"minus",value:15,entity:"days"}),localStorage.setItem(a,JSON.stringify(c)),n=c}return n},O=function(e){return Object(B.a)(Object(B.a)({},e),{},{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,rand:Math.random().toString()})},h=Object(i.useState)(function(){var e=localStorage.getItem(t+"RefreshRate");return e||0}()),m=Object(z.a)(h,2),p=m[0],f=m[1],x=Object(i.useState)(O({fromDate:b(t,"DateFrom"),toDate:b(t,"DateTo"),query:function(e,t){var n,a=e+t;return(n=localStorage.getItem(a))||(n="",localStorage.setItem(a,n)),n}(t,"Query"),limit:10})),v=Object(z.a)(x,2),g=v[0],y=v[1];Object(i.useEffect)((function(){var e;return p>0&&(e=setInterval((function(){return y(O(g))}),1e3*p)),function(){e&&clearInterval(e)}}),[p,g]);return Object(a.jsxs)("div",{className:"DataAnalytics",children:[Object(a.jsx)(oa,{type:t,initDate:g,initRefresh:p,onFilterClick:function(e){var t=e.to,n=e.from,a=e.query;y(O({fromDate:n,toDate:t,query:a,limit:10}))},onRefreshChange:function(e){localStorage.setItem(t+"RefreshRate",e),f(e)}}),Object(a.jsx)("div",{className:"Data",children:Object(a.jsx)(ua,{onLoadDataRequest:n,onLoadHistogramRequest:c,onLoadDetails:s,timeFieldLabel:l,filterFields:u,timeField:o,initQuery:g,displayDetails:d,detailsDrawerWidth:j,detailsLabel:r,children:Object(a.jsx)(va,{onLoadRequest:c(g),columns:[{label:"events",color:"#039be5",stackId:"events"}]})})})]})}function ya(){return Object(a.jsx)(ga,{type:"event",enableFiltering:!0,detailsLabel:"Event details",timeFieldLabel:"timestamp",filterFields:["itemType","scope","eventType","sessionId","profileId","timeStamp"],timeField:function(e){return[e.timeStamp,e.scope,e.eventType]},onLoadHistogramRequest:function(e){return{url:"/event/chart/histogram",method:"post",data:e}},onLoadDataRequest:function(e){return{url:"/event/chart/data",method:"post",data:e}},onLoadDetails:function(e){return{url:"/event/"+e,method:"get"}},detailsDrawerWidth:600,displayDetails:function(e){return Object(a.jsx)(dt,{data:e})}})}var Sa=n(949),Ca=n(373);function Na(e){var t=e.onLoadRequest,n=e.columns,s=c.a.useState(!1),r=Object(z.a)(s,2),o=r[0],l=r[1],d=c.a.useState(!1),j=Object(z.a)(d,2),u=(j[0],j[1]),b=c.a.useState(!1),O=Object(z.a)(b,2),h=O[0],m=O[1];Object(i.useEffect)((function(){pe(t,(function(e){l(e)}),(function(e){u(e)}),(function(e){m(e)}))}),[t]);var p=function(e){var t=e.active,n=e.payload,i=e.label;return t&&n&&n.length?Object(a.jsxs)("div",{className:"ChartToolTip",children:[Object(a.jsx)("p",{children:"Start time : ".concat(i)}),Object(a.jsx)("p",{children:"Time span : ".concat(n[0].payload.interval)}),Object(a.jsx)("p",{children:"Value : ".concat(n[0].value)})]}):null};return Object(a.jsxs)("div",{style:{height:200,width:"100%"},children:[!0===o&&Object(a.jsx)(Ne,{}),!1!==h&&Object(a.jsx)(ba.a,{children:Object(a.jsxs)(Sa.a,{data:h.data.data,margin:{top:15,right:20,bottom:5,left:0},children:[Object(a.jsx)(ha.a,{strokeDasharray:"3 3"}),Object(a.jsx)(ma.a,{isAnimationActive:!1,content:Object(a.jsx)(p,{})}),n.map((function(e,t){return Object(a.jsx)(Ca.a,{type:"monotone",strokeWidth:2,stackId:e.stackId?e.stackId:"stack",dataKey:e.label,fill:e.color?e.color:"#4fc3f7"},t)})),Object(a.jsx)(fa.a,{dataKey:"time",style:{fontSize:"80%"}}),Object(a.jsx)(xa.a,{style:{fontSize:"90%"}})]})})]})}function ka(e){var t=e.data,n={fromDate:{relative:{type:"minus",value:1,entity:"week"},now:null},toDate:{relative:{type:null,value:null,entity:null},now:"now"},query:'profileId="'+t.itemId+'"',limit:10},i=Object(B.a)(Object(B.a)({},n),{},{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,rand:Math.random().toString()});return Object(a.jsxs)("div",{style:{height:"inherit"},children:[Object(a.jsx)(Ie,{label:t.itemId}),Object(a.jsx)("div",{className:"RightTabScroller",children:Object(a.jsxs)(qt,{tabs:["Properties","Segments","Events","Sessions","Raw"],children:[Object(a.jsx)(_t,{id:0,children:Object(a.jsxs)("div",{className:"Box10",children:[Object(a.jsx)(De,{children:"Properties"}),Object(a.jsx)(Be,{properties:t.properties}),Object(a.jsx)(De,{children:"System Properties"}),Object(a.jsx)(Be,{properties:t.systemProperties})]})}),Object(a.jsx)(_t,{id:1,children:Object(a.jsx)("div",{className:"Box10",children:Object(a.jsx)(Be,{properties:t.segments})})}),Object(a.jsx)(_t,{id:2,children:Object(a.jsx)(ua,{onLoadDataRequest:function(e){return{url:"/event/chart/data",method:"post",data:e}},timeFieldLabel:"timestamp",filterFields:["itemType","scope","eventType","sessionId","profileId","timeStamp"],timeField:function(e){return[e.timeStamp,e.scope,e.eventType]},initQuery:i,children:Object(a.jsx)(Na,{onLoadRequest:function(e){return{url:"/event/chart/histogram",method:"post",data:e}}(i),columns:[{label:"events",color:"#039be5",stackId:"events"}]})})}),Object(a.jsx)(_t,{id:3,children:Object(a.jsx)(ua,{onLoadDataRequest:function(e){return{url:"/session/chart/data",method:"post",data:e}},timeFieldLabel:"timestamp",filterFields:["itemType","scope","eventType","sessionId","profileId","timeStamp"],timeField:function(e){return[e.timeStamp,e.scope,e.eventType]},initQuery:i,children:Object(a.jsx)(Na,{onLoadRequest:function(e){return{url:"/session/chart/histogram",method:"post",data:e}}(i),columns:[{label:"events",color:"#039be5",stackId:"events"}]})})}),Object(a.jsx)(_t,{id:4,children:Object(a.jsx)("div",{className:"Box10",children:Object(a.jsx)(Fe.a,{data:t,theme:Ae,expandLevel:3})})})]})})]})}function Ta(){return Object(a.jsx)(ga,{type:"profile",enableFiltering:!0,detailsLabel:"Profile details",timeFieldLabel:"last visit",timeField:function(e){return[e.properties.lastVisit]},filterFields:["itemType","systemProperties.lastUpdated"],onLoadHistogramRequest:function(e){return{url:"/profile/chart/histogram",method:"post",data:e}},onLoadDataRequest:function(e){return{url:"/profile/chart/data",method:"post",data:e}},onLoadDetails:function(e){return{url:"/profile/"+e,method:"get"}},displayDetails:function(e){return Object(a.jsx)(ka,{data:e})},detailsDrawerWidth:1200})}function Ra(){return Object(a.jsx)(ga,{enableFiltering:!0,type:"session",detailsLabel:"Session details",timeFieldLabel:"timestamp",filterFields:["itemId","itemType","scope","profile","timeStamp","size","lastEventDate"],timeField:function(e){return[e.timeStamp,e.scope,e.properties.userAgentName]},onLoadHistogramRequest:function(e){return{url:"/session/chart/histogram",method:"post",data:e}},onLoadDataRequest:function(e){return{url:"/session/chart/data",method:"post",data:e}}})}var wa=n(374),Da=n(376),La=n(375),Ea=n(377),Aa=function(){return Object(a.jsxs)(K,{children:[Object(a.jsxs)(J,{children:[Object(a.jsx)(te,{icon:Object(a.jsx)(wa.GoDatabase,{size:20}),title:"Data",link:"/app/home",defaultLink:"/app/home"}),Object(a.jsx)(te,{icon:Object(a.jsx)(La.FaTools,{size:20}),title:"Set-up",link:"/app/setup"}),Object(a.jsx)(te,{icon:Object(a.jsx)(Da.VscDebugConsole,{size:20}),title:"Dev",link:"/app/dev"}),Object(a.jsx)(te,{icon:Object(a.jsx)(Ea.ImExit,{size:20}),title:"Logout",link:"/app/logout"})]}),Object(a.jsx)(le,{exact:!0,path:"/app",roles:["unomi"],children:Object(a.jsx)(H.a,{to:"/app/home/events"})}),Object(a.jsxs)(le,{path:"/app/home",roles:["unomi"],children:[Object(a.jsxs)($,{title:"Data",children:[Object(a.jsx)(ee,{link:"/app/home/events",defaultLink:["/app/home","/app"],children:"Events"}),Object(a.jsx)(ee,{link:"/app/home/profiles",children:"Profiles"}),Object(a.jsx)(ee,{link:"/app/home/sessions",children:"Sessions"})]}),Object(a.jsx)(H.a,{to:"/app/home/events"})]}),Object(a.jsx)(le,{path:"/app/setup",roles:["unomi"],children:Object(a.jsxs)($,{title:"Set-up",children:[Object(a.jsx)(ee,{link:"/app/setup/sources",children:"Sources"}),Object(a.jsx)(ee,{link:"/app/setup/rules",defaultLink:["/app/setup"],children:"Rules"}),Object(a.jsx)(ee,{link:"/app/setup/segments",children:"Segments"})]})}),Object(a.jsx)(le,{path:"/app/dev",roles:["unomi"],children:Object(a.jsxs)($,{title:"Dev",children:[Object(a.jsx)(ee,{link:"/app/dev/console",defaultLink:["/app/dev"],children:"Console"}),Object(a.jsx)(ee,{link:"/app/dev/manual/uql",children:"UQL Manual"}),Object(a.jsx)(Gn,{children:Object(a.jsxs)(Yn,{link:"/app/dev/manual/uql",children:[Object(a.jsx)(ee,{link:"/app/dev/manual/uql/select",children:"> Select UQL"}),Object(a.jsx)(ee,{link:"/app/dev/manual/uql/create",children:"> Create UQL"}),Object(a.jsx)(ee,{link:"/app/dev/manual/uql/delete",children:"> Delete UQL"})]})})]})}),Object(a.jsx)(Q,{children:Object(a.jsx)("div",{className:"contentPane",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(le,{path:"/app/home/events",roles:["unomi"],children:Object(a.jsx)(ya,{})}),Object(a.jsx)(le,{path:"/app/home/profiles",roles:["unomi"],children:Object(a.jsx)(Ta,{})}),Object(a.jsx)(le,{path:"/app/home/sessions",roles:["unomi"],children:Object(a.jsx)(Ra,{})}),Object(a.jsx)(le,{exact:!0,path:"/app/home",roles:["unomi"]}),Object(a.jsx)(le,{exact:!0,path:"/app",roles:["unomi"]}),Object(a.jsx)(le,{path:"/app/setup/sources",roles:["unomi"],children:Object(a.jsx)(ot,{})}),Object(a.jsx)(le,{path:"/app/setup/events",roles:["unomi"],children:Object(a.jsx)(jt,{})}),Object(a.jsx)(le,{path:"/app/setup/rules",roles:["unomi"],children:Object(a.jsx)(Sn,{})}),Object(a.jsx)(le,{path:"/app/setup/segments",roles:["unomi"],children:Object(a.jsx)(Rn,{})}),Object(a.jsx)(le,{exact:!0,path:"/app/setup",roles:["unomi"],children:Object(a.jsx)(Sn,{})}),Object(a.jsx)(le,{path:"/app/dev/console",roles:["unomi"],children:Object(a.jsx)(qn,{})}),Object(a.jsx)(le,{exact:!0,path:"/app/dev",roles:["unomi"],children:Object(a.jsx)(qn,{})}),Object(a.jsx)(H.b,{exact:!0,path:"/app/dev/manual/uql/select",children:Object(a.jsx)(Qn,{mdFile:"uql/select"})}),Object(a.jsx)(H.b,{exact:!0,path:"/app/dev/manual/uql/create",children:Object(a.jsx)(Qn,{mdFile:"uql/create"})}),Object(a.jsx)(H.b,{exact:!0,path:"/app/dev/manual/uql/delete",children:Object(a.jsx)(Qn,{mdFile:"uql/delete"})}),Object(a.jsx)(H.b,{exact:!0,path:"/app/dev/manual/uql",children:Object(a.jsx)(Qn,{mdFile:"start"})})]})})})]})};function Fa(){return ie(),Object(a.jsx)(H.a,{to:"/app/login"})}var Ia=n(969),_a=n(951),qa=n(963),Pa=n(952),za=n(968),Ba=n(378),Ma=n.n(Ba),Ha=n(950);function Wa(e,t,n){if(n=n||[],"object"==typeof e)for(var a in e)Wa(e[a],t?t+"["+a+"]":a,n);else n.push(t+"="+encodeURIComponent(e));return n.join("&")}var Ua=function(e,t){var n={username:e,password:t};return be({"Content-Type":"application/x-www-form-urlencoded"}).post("/token",Wa(n))},Va=n(205),Ja=n(379),Ka=Object(Ja.a)({palette:{primary:{main:"#006db3"},secondary:{main:"#EF6C00"},error:{main:Va.a.A400},background:{default:"#ccc"},text:{primary:"#000"}}}),Qa=Object(Ja.a)({palette:{primary:{main:"#006db3"},secondary:{light:"#cF5C00",main:"#EF6C00",contrastText:"#ffcc00"},background:{default:"#fff"},text:{primary:"#000"}}});Object(Ja.a)({palette:{primary:{main:"#fff"},secondary:{light:"#fff",main:"#fff",contrastText:"#ffcc00"},background:{default:"#2196f3",paper:"inherit"},text:{primary:"#fff",secondary:"#bbb",disabled:"#999"}}});function Ga(){return Object(a.jsxs)(se.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(re.a,{color:"inherit",href:"http://tracardi.com/",children:"TRACARDI"})," ",(new Date).getFullYear(),"."]})}var Ya=Object(ve.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"10px 20px",backgroundColor:"white",borderRadius:"5px",color:"black"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},input:{color:"black"},submit:{margin:e.spacing(3,0,2)}}})),Xa=Object(P.b)(null,{showAlert:k})((function(e){var t=e.showAlert,n=Ya(),c=Object(i.useState)(""),s=Object(z.a)(c,2),r=s[0],o=s[1],l=Object(i.useState)(""),d=Object(z.a)(l,2),j=d[0],u=d[1],b=Object(i.useState)(!1),O=Object(z.a)(b,2),h=O[0],m=O[1],p=(Object(H.h)().state||{from:{pathname:"/app/home"}}).from,f=Object(i.useState)(!1),x=Object(z.a)(f,2),v=x[0],g=x[1];return v?Object(a.jsx)(H.a,{to:p}):Object(a.jsx)(vt.a,{theme:Qa,children:Object(a.jsx)(Ha.a,{component:"main",maxWidth:"xs",children:Object(a.jsxs)("div",{className:n.paper,children:[Object(a.jsx)(Ia.a,{className:n.avatar,children:Object(a.jsx)(Ma.a,{})}),Object(a.jsx)(se.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{onSubmitCapture:function(e){Ua(r,j).then((function(e){var t,n;t=e.data.access_token,localStorage.setItem("auth-token",t),n=e.data.roles,localStorage.setItem("auth-roles",JSON.stringify(n)),g(!0)})).catch((function(e){var n=e.message;"undefined"==typeof e.response?n="Api unavailable.":422===e.response.status?n="Bag request. Fill all fields.":"string"==typeof e.response.data.detail&&(n=e.response.data.detail),t({type:"error",message:n})})),e.preventDefault()},className:n.form,noValidate:!0,children:[Object(a.jsx)(xe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){o(e.target.value)}}),Object(a.jsx)(xe.a,{style:{color:"black"},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){u(e.target.value)}}),Object(a.jsx)(_a.a,{control:Object(a.jsx)(qa.a,{value:"remember",color:"primary",onChange:function(e){m(e.target.checked)},checked:h}),label:"Remember me"}),Object(a.jsx)(_e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign In"}),Object(a.jsxs)(Pa.a,{container:!0,children:[Object(a.jsx)(Pa.a,{item:!0,xs:!0,children:Object(a.jsx)(re.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(a.jsx)(Pa.a,{item:!0})]})]}),Object(a.jsx)(za.a,{mt:8,children:Object(a.jsx)(Ga,{})})]})})})})),Za=(n(874),n(953)),$a=n(954),ei=n(955),ti=n(956);function ni(e){var t=e.onClick;return Object(a.jsx)("div",{className:"SocialSplashRoot",children:Object(a.jsxs)("div",{className:"SocialSplash",children:[Object(a.jsx)("div",{className:"Image",children:Object(a.jsx)("img",{src:"/app/splash.svg",alt:"Splash"})}),Object(a.jsxs)("div",{className:"Content",children:[Object(a.jsxs)("div",{className:"Title",children:["Welcome to ",Object(a.jsx)("span",{className:"Brand",children:"Tracardi"})]}),Object(a.jsx)("div",{className:"Tag",children:"Graphic User Interface for Apache Unomi"}),Object(a.jsxs)("div",{className:"Message",children:[Object(a.jsx)("p",{children:"Tracardi is still very early, but we would love to see what you can do with it at this stage!"}),Object(a.jsxs)("p",{children:["If you would like to support us please follow us on ",Object(a.jsx)(G,{icon:Object(a.jsx)(Za.a,{}),title:"Facebook",link:"https://www.facebook.com/TRACARDI/"})," or ",Object(a.jsx)(G,{icon:Object(a.jsx)($a.a,{}),title:"Twitter",link:"https://twitter.com/tracardi"}),"tag us and leave your comments. Subscribe to our ",Object(a.jsx)(G,{icon:Object(a.jsx)(ei.a,{}),title:"Youtube",link:"https://www.youtube.com/channel/UC0atjYqW43MdqNiSJBvN__Q"})," channel to see development process and new upcoming features."]})]}),Object(a.jsx)("div",{className:"Continue",children:Object(a.jsx)(G,{icon:Object(a.jsx)(ti.a,{}),title:"Continue",onClick:t})})]})]})})}n(875);function ai(e){return Object(a.jsx)(U.a,Object(B.a)({elevation:6,variant:"filled"},e))}var ii=Object(P.b)((function(e){return{alert:e.alertReducer}}))((function(e){var t=e.alert,n=Object(i.useState)(!0),c=Object(z.a)(n,2),s=c[0],r=c[1],o=Object(P.c)(),l=function(){o(T())},d=function(){r(!1)};return s?Object(a.jsx)(ni,{onClick:d}):Object(a.jsxs)(M.a,{children:[Object(a.jsxs)(H.d,{children:[Object(a.jsx)(H.b,{exact:!0,path:"/app/login",children:Object(a.jsx)(Xa,{})}),Object(a.jsx)(H.b,{exact:!0,path:"/app/logout",children:Object(a.jsx)(Fa,{})}),Object(a.jsx)(le,{path:"/app",roles:["unomi"],children:Object(a.jsx)(Aa,{})})]}),Object(a.jsx)(W.a,{open:t.show,autoHideDuration:t.hideAfter,onClose:l,children:Object(a.jsx)(ai,{onClose:l,severity:t.type,children:Object(a.jsx)("pre",{style:{margin:0,overflow:"auto",maxWidth:"500px"},children:t.message})})})]})}));o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(P.a,{store:q,children:Object(a.jsxs)(vt.a,{theme:Ka,children:[Object(a.jsx)(s.a,{}),Object(a.jsx)(ii,{})]})})}),document.querySelector("#root")),l()}},[[876,1,2]]]);
//# sourceMappingURL=main.6c07e464.chunk.js.map